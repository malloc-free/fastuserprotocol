\hypertarget{tb__client_8c}{\section{src/tb\-\_\-client.c File Reference}
\label{tb__client_8c}\index{src/tb\-\_\-client.\-c@{src/tb\-\_\-client.\-c}}
}
{\ttfamily \#include \char`\"{}tb\-\_\-client.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}tb\-\_\-testbed.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}tb\-\_\-protocol.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}tb\-\_\-listener.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}tb\-\_\-session.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}tb\-\_\-udp.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}tb\-\_\-utp.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}tb\-\_\-common.\-h\char`\"{}}\\*
{\ttfamily \#include $<$stdio.\-h$>$}\\*
{\ttfamily \#include $<$stdlib.\-h$>$}\\*
{\ttfamily \#include $<$assert.\-h$>$}\\*
{\ttfamily \#include $<$pthread.\-h$>$}\\*
{\ttfamily \#include $<$sys/socket.\-h$>$}\\*
{\ttfamily \#include $<$fcntl.\-h$>$}\\*
{\ttfamily \#include $<$unistd.\-h$>$}\\*
{\ttfamily \#include $<$string.\-h$>$}\\*
{\ttfamily \#include $<$sys/epoll.\-h$>$}\\*
{\ttfamily \#include $<$time.\-h$>$}\\*
{\ttfamily \#include $<$sys/ioctl.\-h$>$}\\*
{\ttfamily \#include $<$netinet/in.\-h$>$}\\*
{\ttfamily \#include $<$netdb.\-h$>$}\\*
{\ttfamily \#include $<$udt.\-h$>$}\\*
{\ttfamily \#include $<$errno.\-h$>$}\\*
Include dependency graph for tb\-\_\-client.\-c\-:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{tb__client_8c__incl}
\end{center}
\end{figure}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void $\ast$ \hyperlink{tb__client_8c_aef656bc85ab4f5554d4bf274c43c1ce7}{tb\-\_\-client} (void $\ast$data)
\begin{DoxyCompactList}\small\item\em Runs the client. \end{DoxyCompactList}\item 
int \hyperlink{tb__client_8c_a4836f7e8e6b482f36a354d52d16b5843}{tb\-\_\-stream\-\_\-m\-\_\-client} (\hyperlink{structtb__listener__t}{tb\-\_\-listener\-\_\-t} $\ast$listener)
\begin{DoxyCompactList}\small\item\em Upload using stream sockets. \end{DoxyCompactList}\item 
void $\ast$ \hyperlink{tb__client_8c_aaa8373bc3d9d810fb73ce3cf09dbd27a}{tb\-\_\-stream\-\_\-connection} (void $\ast$data)
\begin{DoxyCompactList}\small\item\em A single stream connection. \end{DoxyCompactList}\item 
int \hyperlink{tb__client_8c_a37207d097b0a8f4906fda05c22b5d851}{tb\-\_\-stream\-\_\-client} (\hyperlink{structtb__listener__t}{tb\-\_\-listener\-\_\-t} $\ast$listener)
\begin{DoxyCompactList}\small\item\em Upload with a single connection. \end{DoxyCompactList}\item 
int \hyperlink{tb__client_8c_a713f3ee749956d8e589263b56ddec118}{tb\-\_\-udt\-\_\-client} (\hyperlink{structtb__listener__t}{tb\-\_\-listener\-\_\-t} $\ast$listener)
\begin{DoxyCompactList}\small\item\em Upload a file using udt. \end{DoxyCompactList}\item 
int \hyperlink{tb__client_8c_a2d630c38c6c37789b56d70a575a1eeb5}{tb\-\_\-udp\-\_\-client} (\hyperlink{structtb__listener__t}{tb\-\_\-listener\-\_\-t} $\ast$listener)
\begin{DoxyCompactList}\small\item\em Upload a file using udp with epoll eof ack. \end{DoxyCompactList}\item 
int \hyperlink{tb__client_8c_ac1be4ad75f9aa84b62a3cd530f822ea9}{tb\-\_\-udp\-\_\-ack} (int events, void $\ast$data)
\begin{DoxyCompactList}\small\item\em Callback function for udp. \end{DoxyCompactList}\item 
int \hyperlink{tb__client_8c_aaef934c0644a4ded7635420534b2bd01}{tb\-\_\-utp\-\_\-client} (\hyperlink{structtb__listener__t}{tb\-\_\-listener\-\_\-t} $\ast$listener)
\begin{DoxyCompactList}\small\item\em Upload using the u\-T\-P protocol. \end{DoxyCompactList}\item 
int \hyperlink{tb__client_8c_a0e726d76f273fe0f7d77d569bbe481c0}{tb\-\_\-udp\-\_\-epoll\-\_\-client} (\hyperlink{structtb__listener__t}{tb\-\_\-listener\-\_\-t} $\ast$listener)
\begin{DoxyCompactList}\small\item\em Uses epoll for receiving data from the client. This is a prototype for T\-B0.\-2. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Function Documentation}
\hypertarget{tb__client_8c_aef656bc85ab4f5554d4bf274c43c1ce7}{\index{tb\-\_\-client.\-c@{tb\-\_\-client.\-c}!tb\-\_\-client@{tb\-\_\-client}}
\index{tb\-\_\-client@{tb\-\_\-client}!tb_client.c@{tb\-\_\-client.\-c}}
\subsubsection[{tb\-\_\-client}]{\setlength{\rightskip}{0pt plus 5cm}void$\ast$ tb\-\_\-client (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{data}
\end{DoxyParamCaption}
)}}\label{tb__client_8c_aef656bc85ab4f5554d4bf274c43c1ce7}


Runs the client. 

Runs the client, called from pthread\-\_\-create.

\begin{DoxyPrecond}{Precondition}
data must be of type \hyperlink{structtb__listener__t}{tb\-\_\-listener\-\_\-t}. 
\end{DoxyPrecond}

\begin{DoxyParams}{Parameters}
{\em data} & Instance of \hyperlink{structtb__listener__t}{tb\-\_\-listener\-\_\-t} to run as client. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
As pthread\-\_\-exit is called, this does not return. 
\end{DoxyReturn}


Definition at line 35 of file tb\-\_\-client.\-c.

\hypertarget{tb__client_8c_a37207d097b0a8f4906fda05c22b5d851}{\index{tb\-\_\-client.\-c@{tb\-\_\-client.\-c}!tb\-\_\-stream\-\_\-client@{tb\-\_\-stream\-\_\-client}}
\index{tb\-\_\-stream\-\_\-client@{tb\-\_\-stream\-\_\-client}!tb_client.c@{tb\-\_\-client.\-c}}
\subsubsection[{tb\-\_\-stream\-\_\-client}]{\setlength{\rightskip}{0pt plus 5cm}int tb\-\_\-stream\-\_\-client (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-listener\-\_\-t} $\ast$}]{listener}
\end{DoxyParamCaption}
)}}\label{tb__client_8c_a37207d097b0a8f4906fda05c22b5d851}


Upload with a single connection. 



Definition at line 247 of file tb\-\_\-client.\-c.

\hypertarget{tb__client_8c_aaa8373bc3d9d810fb73ce3cf09dbd27a}{\index{tb\-\_\-client.\-c@{tb\-\_\-client.\-c}!tb\-\_\-stream\-\_\-connection@{tb\-\_\-stream\-\_\-connection}}
\index{tb\-\_\-stream\-\_\-connection@{tb\-\_\-stream\-\_\-connection}!tb_client.c@{tb\-\_\-client.\-c}}
\subsubsection[{tb\-\_\-stream\-\_\-connection}]{\setlength{\rightskip}{0pt plus 5cm}void$\ast$ tb\-\_\-stream\-\_\-connection (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{data}
\end{DoxyParamCaption}
)}}\label{tb__client_8c_aaa8373bc3d9d810fb73ce3cf09dbd27a}


A single stream connection. 



Definition at line 186 of file tb\-\_\-client.\-c.

\hypertarget{tb__client_8c_a4836f7e8e6b482f36a354d52d16b5843}{\index{tb\-\_\-client.\-c@{tb\-\_\-client.\-c}!tb\-\_\-stream\-\_\-m\-\_\-client@{tb\-\_\-stream\-\_\-m\-\_\-client}}
\index{tb\-\_\-stream\-\_\-m\-\_\-client@{tb\-\_\-stream\-\_\-m\-\_\-client}!tb_client.c@{tb\-\_\-client.\-c}}
\subsubsection[{tb\-\_\-stream\-\_\-m\-\_\-client}]{\setlength{\rightskip}{0pt plus 5cm}int tb\-\_\-stream\-\_\-m\-\_\-client (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-listener\-\_\-t} $\ast$}]{listener}
\end{DoxyParamCaption}
)}}\label{tb__client_8c_a4836f7e8e6b482f36a354d52d16b5843}


Upload using stream sockets. 

Upload using bsd stream based protocols (T\-C\-P, D\-C\-C\-P) with multiple connections. 

Definition at line 97 of file tb\-\_\-client.\-c.

\hypertarget{tb__client_8c_ac1be4ad75f9aa84b62a3cd530f822ea9}{\index{tb\-\_\-client.\-c@{tb\-\_\-client.\-c}!tb\-\_\-udp\-\_\-ack@{tb\-\_\-udp\-\_\-ack}}
\index{tb\-\_\-udp\-\_\-ack@{tb\-\_\-udp\-\_\-ack}!tb_client.c@{tb\-\_\-client.\-c}}
\subsubsection[{tb\-\_\-udp\-\_\-ack}]{\setlength{\rightskip}{0pt plus 5cm}int tb\-\_\-udp\-\_\-ack (
\begin{DoxyParamCaption}
\item[{int}]{events, }
\item[{void $\ast$}]{data}
\end{DoxyParamCaption}
)}}\label{tb__client_8c_ac1be4ad75f9aa84b62a3cd530f822ea9}


Callback function for udp. 

This is the function that is called when the eof from the server has be acknowledged. 

Definition at line 395 of file tb\-\_\-client.\-c.

\hypertarget{tb__client_8c_a2d630c38c6c37789b56d70a575a1eeb5}{\index{tb\-\_\-client.\-c@{tb\-\_\-client.\-c}!tb\-\_\-udp\-\_\-client@{tb\-\_\-udp\-\_\-client}}
\index{tb\-\_\-udp\-\_\-client@{tb\-\_\-udp\-\_\-client}!tb_client.c@{tb\-\_\-client.\-c}}
\subsubsection[{tb\-\_\-udp\-\_\-client}]{\setlength{\rightskip}{0pt plus 5cm}int tb\-\_\-udp\-\_\-client (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-listener\-\_\-t} $\ast$}]{listener}
\end{DoxyParamCaption}
)}}\label{tb__client_8c_a2d630c38c6c37789b56d70a575a1eeb5}


Upload a file using udp with epoll eof ack. 

The difference between upload\-\_\-random\-\_\-udp and udp is that this uses the epoll mechanism to listenen for an ack of the eof. This insures that transmission is complete in the event of packet loss. 

Definition at line 327 of file tb\-\_\-client.\-c.

\hypertarget{tb__client_8c_a0e726d76f273fe0f7d77d569bbe481c0}{\index{tb\-\_\-client.\-c@{tb\-\_\-client.\-c}!tb\-\_\-udp\-\_\-epoll\-\_\-client@{tb\-\_\-udp\-\_\-epoll\-\_\-client}}
\index{tb\-\_\-udp\-\_\-epoll\-\_\-client@{tb\-\_\-udp\-\_\-epoll\-\_\-client}!tb_client.c@{tb\-\_\-client.\-c}}
\subsubsection[{tb\-\_\-udp\-\_\-epoll\-\_\-client}]{\setlength{\rightskip}{0pt plus 5cm}int tb\-\_\-udp\-\_\-epoll\-\_\-client (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-listener\-\_\-t} $\ast$}]{listener}
\end{DoxyParamCaption}
)}}\label{tb__client_8c_a0e726d76f273fe0f7d77d569bbe481c0}


Uses epoll for receiving data from the client. This is a prototype for T\-B0.\-2. 



Definition at line 446 of file tb\-\_\-client.\-c.

\hypertarget{tb__client_8c_a713f3ee749956d8e589263b56ddec118}{\index{tb\-\_\-client.\-c@{tb\-\_\-client.\-c}!tb\-\_\-udt\-\_\-client@{tb\-\_\-udt\-\_\-client}}
\index{tb\-\_\-udt\-\_\-client@{tb\-\_\-udt\-\_\-client}!tb_client.c@{tb\-\_\-client.\-c}}
\subsubsection[{tb\-\_\-udt\-\_\-client}]{\setlength{\rightskip}{0pt plus 5cm}int tb\-\_\-udt\-\_\-client (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-listener\-\_\-t} $\ast$}]{listener}
\end{DoxyParamCaption}
)}}\label{tb__client_8c_a713f3ee749956d8e589263b56ddec118}


Upload a file using udt. 



Definition at line 284 of file tb\-\_\-client.\-c.

\hypertarget{tb__client_8c_aaef934c0644a4ded7635420534b2bd01}{\index{tb\-\_\-client.\-c@{tb\-\_\-client.\-c}!tb\-\_\-utp\-\_\-client@{tb\-\_\-utp\-\_\-client}}
\index{tb\-\_\-utp\-\_\-client@{tb\-\_\-utp\-\_\-client}!tb_client.c@{tb\-\_\-client.\-c}}
\subsubsection[{tb\-\_\-utp\-\_\-client}]{\setlength{\rightskip}{0pt plus 5cm}int tb\-\_\-utp\-\_\-client (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-listener\-\_\-t} $\ast$}]{listener}
\end{DoxyParamCaption}
)}}\label{tb__client_8c_aaef934c0644a4ded7635420534b2bd01}


Upload using the u\-T\-P protocol. 

Upload data using the u\-T\-P protocol. 

Definition at line 407 of file tb\-\_\-client.\-c.

