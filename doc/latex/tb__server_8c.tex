\hypertarget{tb__server_8c}{\section{src/tb\-\_\-server.c File Reference}
\label{tb__server_8c}\index{src/tb\-\_\-server.\-c@{src/tb\-\_\-server.\-c}}
}
{\ttfamily \#include \char`\"{}tb\-\_\-server.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}tb\-\_\-protocol.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}tb\-\_\-listener.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}tb\-\_\-testbed.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}tb\-\_\-common.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}tb\-\_\-udp.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}tb\-\_\-utp.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}udt.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}tb\-\_\-session.\-h\char`\"{}}\\*
{\ttfamily \#include $<$utp.\-h$>$}\\*
{\ttfamily \#include $<$stdio.\-h$>$}\\*
{\ttfamily \#include $<$stdlib.\-h$>$}\\*
{\ttfamily \#include $<$assert.\-h$>$}\\*
{\ttfamily \#include $<$pthread.\-h$>$}\\*
{\ttfamily \#include $<$sys/socket.\-h$>$}\\*
{\ttfamily \#include $<$fcntl.\-h$>$}\\*
{\ttfamily \#include $<$unistd.\-h$>$}\\*
{\ttfamily \#include $<$string.\-h$>$}\\*
{\ttfamily \#include $<$sys/epoll.\-h$>$}\\*
{\ttfamily \#include $<$time.\-h$>$}\\*
{\ttfamily \#include $<$errno.\-h$>$}\\*
Include dependency graph for tb\-\_\-server.\-c\-:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{tb__server_8c__incl}
\end{center}
\end{figure}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void $\ast$ \hyperlink{tb__server_8c_ad7d989dc2facd18964b22326b48b7d71}{tb\-\_\-server} (void $\ast$data)
\begin{DoxyCompactList}\small\item\em Runs the server. \end{DoxyCompactList}\item 
int \hyperlink{tb__server_8c_ab254f51747c78bfc75e1dd91945936af}{tb\-\_\-stream\-\_\-server} (\hyperlink{structtb__listener__t}{tb\-\_\-listener\-\_\-t} $\ast$listener)
\begin{DoxyCompactList}\small\item\em Run a server without epoll (blocking socket). \end{DoxyCompactList}\item 
int \hyperlink{tb__server_8c_a736ead28c313623ab95be2738fa6a2d8}{tb\-\_\-stream\-\_\-m\-\_\-server} (\hyperlink{structtb__listener__t}{tb\-\_\-listener\-\_\-t} $\ast$listener)
\item 
int \hyperlink{tb__server_8c_a2824c0d70d74f26a227971550f32446f}{tb\-\_\-stream\-\_\-event} (int events, void $\ast$data)
\item 
void $\ast$ \hyperlink{tb__server_8c_afbdad677cb3cfe90954ec6e482fec19c}{tb\-\_\-stream\-\_\-m\-\_\-server\-\_\-conn} (void $\ast$data)
\item 
int \hyperlink{tb__server_8c_abbfc0a93f9d26ea48ce0f27f2341b25f}{tb\-\_\-udt\-\_\-server} (\hyperlink{structtb__listener__t}{tb\-\_\-listener\-\_\-t} $\ast$listener)
\begin{DoxyCompactList}\small\item\em Run the server with U\-D\-T. \end{DoxyCompactList}\item 
int \hyperlink{tb__server_8c_aa96de8208d00dd816bee9110ba759cf6}{tb\-\_\-udp\-\_\-server} (\hyperlink{structtb__listener__t}{tb\-\_\-listener\-\_\-t} $\ast$listener)
\begin{DoxyCompactList}\small\item\em Run a server using U\-D\-P, and epoll to signal transmission end. \end{DoxyCompactList}\item 
int \hyperlink{tb__server_8c_a4701d9551ad1e0d73019590b729b6224}{tb\-\_\-utp\-\_\-server} (\hyperlink{structtb__listener__t}{tb\-\_\-listener\-\_\-t} $\ast$listener)
\begin{DoxyCompactList}\small\item\em Run a server with u\-T\-P. \end{DoxyCompactList}\item 
int \hyperlink{tb__server_8c_a41ddaa85e718fa4afe65a979a58d7f9a}{tb\-\_\-udp\-\_\-epoll\-\_\-server} (\hyperlink{structtb__listener__t}{tb\-\_\-listener\-\_\-t} $\ast$listener)
\begin{DoxyCompactList}\small\item\em Run a server using epoll (non-\/blocking socket). \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Function Documentation}
\hypertarget{tb__server_8c_ad7d989dc2facd18964b22326b48b7d71}{\index{tb\-\_\-server.\-c@{tb\-\_\-server.\-c}!tb\-\_\-server@{tb\-\_\-server}}
\index{tb\-\_\-server@{tb\-\_\-server}!tb_server.c@{tb\-\_\-server.\-c}}
\subsubsection[{tb\-\_\-server}]{\setlength{\rightskip}{0pt plus 5cm}void$\ast$ tb\-\_\-server (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{data}
\end{DoxyParamCaption}
)}}\label{tb__server_8c_ad7d989dc2facd18964b22326b48b7d71}


Runs the server. 

This starts a server instance, called from pthread\-\_\-create.

\begin{DoxyPrecond}{Precondition}
data must be of type \hyperlink{structtb__listener__t}{tb\-\_\-listener\-\_\-t}. 
\end{DoxyPrecond}

\begin{DoxyParams}{Parameters}
{\em data} & This is an instance of \hyperlink{structtb__listener__t}{tb\-\_\-listener\-\_\-t}. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
As pthread\-\_\-exit is called, this does not return. 
\end{DoxyReturn}


Definition at line 34 of file tb\-\_\-server.\-c.

\hypertarget{tb__server_8c_a2824c0d70d74f26a227971550f32446f}{\index{tb\-\_\-server.\-c@{tb\-\_\-server.\-c}!tb\-\_\-stream\-\_\-event@{tb\-\_\-stream\-\_\-event}}
\index{tb\-\_\-stream\-\_\-event@{tb\-\_\-stream\-\_\-event}!tb_server.c@{tb\-\_\-server.\-c}}
\subsubsection[{tb\-\_\-stream\-\_\-event}]{\setlength{\rightskip}{0pt plus 5cm}int tb\-\_\-stream\-\_\-event (
\begin{DoxyParamCaption}
\item[{int}]{events, }
\item[{void $\ast$}]{data}
\end{DoxyParamCaption}
)}}\label{tb__server_8c_a2824c0d70d74f26a227971550f32446f}


Definition at line 177 of file tb\-\_\-server.\-c.

\hypertarget{tb__server_8c_a736ead28c313623ab95be2738fa6a2d8}{\index{tb\-\_\-server.\-c@{tb\-\_\-server.\-c}!tb\-\_\-stream\-\_\-m\-\_\-server@{tb\-\_\-stream\-\_\-m\-\_\-server}}
\index{tb\-\_\-stream\-\_\-m\-\_\-server@{tb\-\_\-stream\-\_\-m\-\_\-server}!tb_server.c@{tb\-\_\-server.\-c}}
\subsubsection[{tb\-\_\-stream\-\_\-m\-\_\-server}]{\setlength{\rightskip}{0pt plus 5cm}int tb\-\_\-stream\-\_\-m\-\_\-server (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-listener\-\_\-t} $\ast$}]{listener}
\end{DoxyParamCaption}
)}}\label{tb__server_8c_a736ead28c313623ab95be2738fa6a2d8}


Definition at line 160 of file tb\-\_\-server.\-c.

\hypertarget{tb__server_8c_afbdad677cb3cfe90954ec6e482fec19c}{\index{tb\-\_\-server.\-c@{tb\-\_\-server.\-c}!tb\-\_\-stream\-\_\-m\-\_\-server\-\_\-conn@{tb\-\_\-stream\-\_\-m\-\_\-server\-\_\-conn}}
\index{tb\-\_\-stream\-\_\-m\-\_\-server\-\_\-conn@{tb\-\_\-stream\-\_\-m\-\_\-server\-\_\-conn}!tb_server.c@{tb\-\_\-server.\-c}}
\subsubsection[{tb\-\_\-stream\-\_\-m\-\_\-server\-\_\-conn}]{\setlength{\rightskip}{0pt plus 5cm}void$\ast$ tb\-\_\-stream\-\_\-m\-\_\-server\-\_\-conn (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{data}
\end{DoxyParamCaption}
)}}\label{tb__server_8c_afbdad677cb3cfe90954ec6e482fec19c}


Definition at line 232 of file tb\-\_\-server.\-c.

\hypertarget{tb__server_8c_ab254f51747c78bfc75e1dd91945936af}{\index{tb\-\_\-server.\-c@{tb\-\_\-server.\-c}!tb\-\_\-stream\-\_\-server@{tb\-\_\-stream\-\_\-server}}
\index{tb\-\_\-stream\-\_\-server@{tb\-\_\-stream\-\_\-server}!tb_server.c@{tb\-\_\-server.\-c}}
\subsubsection[{tb\-\_\-stream\-\_\-server}]{\setlength{\rightskip}{0pt plus 5cm}int tb\-\_\-stream\-\_\-server (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-listener\-\_\-t} $\ast$}]{listener}
\end{DoxyParamCaption}
)}}\label{tb__server_8c_ab254f51747c78bfc75e1dd91945936af}


Run a server without epoll (blocking socket). 

Runs a server without using epoll, so the socket blocks. Also used by U\-D\-T, a\-U\-D\-T and other protocols that are not implemented in sockets.


\begin{DoxyParams}{Parameters}
{\em listener} & The listener to run the server with. \\
\hline
\end{DoxyParams}


Definition at line 97 of file tb\-\_\-server.\-c.

\hypertarget{tb__server_8c_a41ddaa85e718fa4afe65a979a58d7f9a}{\index{tb\-\_\-server.\-c@{tb\-\_\-server.\-c}!tb\-\_\-udp\-\_\-epoll\-\_\-server@{tb\-\_\-udp\-\_\-epoll\-\_\-server}}
\index{tb\-\_\-udp\-\_\-epoll\-\_\-server@{tb\-\_\-udp\-\_\-epoll\-\_\-server}!tb_server.c@{tb\-\_\-server.\-c}}
\subsubsection[{tb\-\_\-udp\-\_\-epoll\-\_\-server}]{\setlength{\rightskip}{0pt plus 5cm}int tb\-\_\-udp\-\_\-epoll\-\_\-server (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-listener\-\_\-t} $\ast$}]{listener}
\end{DoxyParamCaption}
)}}\label{tb__server_8c_a41ddaa85e718fa4afe65a979a58d7f9a}


Run a server using epoll (non-\/blocking socket). 

Runs a server that uses a sockets based protocol using epoll. Not used by U\-D\-T, a\-U\-D\-T or any thing else not implemented in sockets.


\begin{DoxyParams}{Parameters}
{\em listener} & The listener to run the server with. \\
\hline
\end{DoxyParams}


Definition at line 462 of file tb\-\_\-server.\-c.

\hypertarget{tb__server_8c_aa96de8208d00dd816bee9110ba759cf6}{\index{tb\-\_\-server.\-c@{tb\-\_\-server.\-c}!tb\-\_\-udp\-\_\-server@{tb\-\_\-udp\-\_\-server}}
\index{tb\-\_\-udp\-\_\-server@{tb\-\_\-udp\-\_\-server}!tb_server.c@{tb\-\_\-server.\-c}}
\subsubsection[{tb\-\_\-udp\-\_\-server}]{\setlength{\rightskip}{0pt plus 5cm}int tb\-\_\-udp\-\_\-server (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-listener\-\_\-t} $\ast$}]{listener}
\end{DoxyParamCaption}
)}}\label{tb__server_8c_aa96de8208d00dd816bee9110ba759cf6}


Run a server using U\-D\-P, and epoll to signal transmission end. 



Definition at line 371 of file tb\-\_\-server.\-c.

\hypertarget{tb__server_8c_abbfc0a93f9d26ea48ce0f27f2341b25f}{\index{tb\-\_\-server.\-c@{tb\-\_\-server.\-c}!tb\-\_\-udt\-\_\-server@{tb\-\_\-udt\-\_\-server}}
\index{tb\-\_\-udt\-\_\-server@{tb\-\_\-udt\-\_\-server}!tb_server.c@{tb\-\_\-server.\-c}}
\subsubsection[{tb\-\_\-udt\-\_\-server}]{\setlength{\rightskip}{0pt plus 5cm}int tb\-\_\-udt\-\_\-server (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-listener\-\_\-t} $\ast$}]{listener}
\end{DoxyParamCaption}
)}}\label{tb__server_8c_abbfc0a93f9d26ea48ce0f27f2341b25f}


Run the server with U\-D\-T. 

This runs the T\-B server with the U\-D\-T protocol.


\begin{DoxyParams}{Parameters}
{\em listener} & The listener to run with. \\
\hline
\end{DoxyParams}


Definition at line 278 of file tb\-\_\-server.\-c.

\hypertarget{tb__server_8c_a4701d9551ad1e0d73019590b729b6224}{\index{tb\-\_\-server.\-c@{tb\-\_\-server.\-c}!tb\-\_\-utp\-\_\-server@{tb\-\_\-utp\-\_\-server}}
\index{tb\-\_\-utp\-\_\-server@{tb\-\_\-utp\-\_\-server}!tb_server.c@{tb\-\_\-server.\-c}}
\subsubsection[{tb\-\_\-utp\-\_\-server}]{\setlength{\rightskip}{0pt plus 5cm}int tb\-\_\-utp\-\_\-server (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-listener\-\_\-t} $\ast$}]{listener}
\end{DoxyParamCaption}
)}}\label{tb__server_8c_a4701d9551ad1e0d73019590b729b6224}


Run a server with u\-T\-P. 



Definition at line 419 of file tb\-\_\-server.\-c.

