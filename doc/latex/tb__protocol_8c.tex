\hypertarget{tb__protocol_8c}{\section{src/tb\-\_\-protocol.c File Reference}
\label{tb__protocol_8c}\index{src/tb\-\_\-protocol.\-c@{src/tb\-\_\-protocol.\-c}}
}
{\ttfamily \#include \char`\"{}tb\-\_\-protocol.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}tb\-\_\-utp.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}tb\-\_\-udp.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}tb\-\_\-common.\-h\char`\"{}}\\*
{\ttfamily \#include $<$sys/socket.\-h$>$}\\*
{\ttfamily \#include $<$stdlib.\-h$>$}\\*
{\ttfamily \#include $<$udt.\-h$>$}\\*
{\ttfamily \#include $<$utp.\-h$>$}\\*
{\ttfamily \#include $<$unistd.\-h$>$}\\*
{\ttfamily \#include $<$stdio.\-h$>$}\\*
{\ttfamily \#include $<$fcntl.\-h$>$}\\*
{\ttfamily \#include $<$netinet/tcp.\-h$>$}\\*
{\ttfamily \#include $<$errno.\-h$>$}\\*
{\ttfamily \#include $<$string.\-h$>$}\\*
Include dependency graph for tb\-\_\-protocol.\-c\-:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{tb__protocol_8c__incl}
\end{center}
\end{figure}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{structtb__protocol__t}{tb\-\_\-protocol\-\_\-t} $\ast$ \hyperlink{tb__protocol_8c_aa906a171c2fff5aaf32df7b087153ea0}{tb\-\_\-create\-\_\-protocol} (\hyperlink{tb__protocol_8h_a7a5bff1040fc154c510874327d44cc1a}{P\-R\-O\-T\-O\-C\-O\-L} prot)
\begin{DoxyCompactList}\small\item\em Create a new Protocol. \end{DoxyCompactList}\item 
int \hyperlink{tb__protocol_8c_aabab4d45d896ccb2520e32d2da0a0844}{tb\-\_\-socket\-\_\-error} (int value, int err\-\_\-no)
\begin{DoxyCompactList}\small\item\em Handle errors for socket. \end{DoxyCompactList}\item 
int \hyperlink{tb__protocol_8c_a773702577cc5960a28390c6d2c637679}{tb\-\_\-dccp\-\_\-error} (int value, int err\-\_\-no)
\begin{DoxyCompactList}\small\item\em Handle errors for dccp. \end{DoxyCompactList}\item 
int \hyperlink{tb__protocol_8c_a634f0d467979a16f779333c4f00f97cf}{tb\-\_\-udt\-\_\-error} (int value, int err\-\_\-no)
\begin{DoxyCompactList}\small\item\em Handle errors for udt. \end{DoxyCompactList}\item 
void \hyperlink{tb__protocol_8c_aa2b5480d4df920972d7dec20c54ddfe9}{tb\-\_\-print\-\_\-protocol} (\hyperlink{structtb__protocol__t}{tb\-\_\-protocol\-\_\-t} $\ast$protocol)
\begin{DoxyCompactList}\small\item\em Print the values for this protocol. \end{DoxyCompactList}\item 
void \hyperlink{tb__protocol_8c_a5f8e49b8ee3a8b874dd58231dd099de1}{tb\-\_\-get\-\_\-stats} (\hyperlink{structtb__prot__stats__t}{tb\-\_\-prot\-\_\-stats\-\_\-t} $\ast$stats, int fd)
\begin{DoxyCompactList}\small\item\em Get the stats for the given protocol, with the given descriptor. \end{DoxyCompactList}\item 
void \hyperlink{tb__protocol_8c_aebf261998277b8c36c9b827a3cb2f69a}{tb\-\_\-destroy\-\_\-stats} (\hyperlink{structtb__prot__stats__t}{tb\-\_\-prot\-\_\-stats\-\_\-t} $\ast$stats)
\begin{DoxyCompactList}\small\item\em Destroy stats struct. \end{DoxyCompactList}\item 
void \hyperlink{tb__protocol_8c_a8e38a6ede656010fb440c895610a5d10}{get\-\_\-udt\-\_\-stats} (\hyperlink{structtb__prot__stats__t}{tb\-\_\-prot\-\_\-stats\-\_\-t} $\ast$stats, int fd)
\begin{DoxyCompactList}\small\item\em Get udt stats. \end{DoxyCompactList}\item 
void \hyperlink{tb__protocol_8c_a70096149add47bfaceb6a1c893a9dfd1}{get\-\_\-udp\-\_\-stats} (\hyperlink{structtb__prot__stats__t}{tb\-\_\-prot\-\_\-stats\-\_\-t} $\ast$stats, int fd)
\begin{DoxyCompactList}\small\item\em Get udp stats. \end{DoxyCompactList}\item 
void \hyperlink{tb__protocol_8c_ae303c4e113a72eb8daf629260f13c5a3}{get\-\_\-utp\-\_\-stats} (\hyperlink{structtb__prot__stats__t}{tb\-\_\-prot\-\_\-stats\-\_\-t} $\ast$stats, int fd)
\begin{DoxyCompactList}\small\item\em Get utp stats. \end{DoxyCompactList}\item 
void \hyperlink{tb__protocol_8c_ad16e59fe4e10eb09b2aa2d190baab34e}{get\-\_\-dccp\-\_\-stats} (\hyperlink{structtb__prot__stats__t}{tb\-\_\-prot\-\_\-stats\-\_\-t} $\ast$stats, int fd)
\begin{DoxyCompactList}\small\item\em Get dccp stats. \end{DoxyCompactList}\item 
void \hyperlink{tb__protocol_8c_a8f184a229468afe5ccaa51621032fea5}{get\-\_\-tcp\-\_\-stats} (\hyperlink{structtb__prot__stats__t}{tb\-\_\-prot\-\_\-stats\-\_\-t} $\ast$stats, int fd)
\begin{DoxyCompactList}\small\item\em Get tcp stats. \end{DoxyCompactList}\item 
void \hyperlink{tb__protocol_8c_a94412470e6630d5350bf784a827034c8}{tb\-\_\-get\-\_\-bsd\-\_\-stats} (\hyperlink{structtb__prot__stats__t}{tb\-\_\-prot\-\_\-stats\-\_\-t} $\ast$stats, int fd)
\begin{DoxyCompactList}\small\item\em Get generic bsd stats. \end{DoxyCompactList}\item 
void \hyperlink{tb__protocol_8c_a151f709ceb08d76f790638d9f2c55f37}{tb\-\_\-destroy\-\_\-protocol} (\hyperlink{structtb__protocol__t}{tb\-\_\-protocol\-\_\-t} $\ast$protocol)
\begin{DoxyCompactList}\small\item\em Destroy the given protocol structure. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
const int \hyperlink{tb__protocol_8c_adaa45d502fac3ba218461835d3391c5c}{socket\-\_\-error} = -\/1
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\hypertarget{tb__protocol_8c_ad16e59fe4e10eb09b2aa2d190baab34e}{\index{tb\-\_\-protocol.\-c@{tb\-\_\-protocol.\-c}!get\-\_\-dccp\-\_\-stats@{get\-\_\-dccp\-\_\-stats}}
\index{get\-\_\-dccp\-\_\-stats@{get\-\_\-dccp\-\_\-stats}!tb_protocol.c@{tb\-\_\-protocol.\-c}}
\subsubsection[{get\-\_\-dccp\-\_\-stats}]{\setlength{\rightskip}{0pt plus 5cm}void get\-\_\-dccp\-\_\-stats (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-prot\-\_\-stats\-\_\-t} $\ast$}]{stats, }
\item[{int}]{fd}
\end{DoxyParamCaption}
)}}\label{tb__protocol_8c_ad16e59fe4e10eb09b2aa2d190baab34e}


Get dccp stats. 



Definition at line 299 of file tb\-\_\-protocol.\-c.

\hypertarget{tb__protocol_8c_a8f184a229468afe5ccaa51621032fea5}{\index{tb\-\_\-protocol.\-c@{tb\-\_\-protocol.\-c}!get\-\_\-tcp\-\_\-stats@{get\-\_\-tcp\-\_\-stats}}
\index{get\-\_\-tcp\-\_\-stats@{get\-\_\-tcp\-\_\-stats}!tb_protocol.c@{tb\-\_\-protocol.\-c}}
\subsubsection[{get\-\_\-tcp\-\_\-stats}]{\setlength{\rightskip}{0pt plus 5cm}void get\-\_\-tcp\-\_\-stats (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-prot\-\_\-stats\-\_\-t} $\ast$}]{stats, }
\item[{int}]{fd}
\end{DoxyParamCaption}
)}}\label{tb__protocol_8c_a8f184a229468afe5ccaa51621032fea5}


Get tcp stats. 



Definition at line 305 of file tb\-\_\-protocol.\-c.

\hypertarget{tb__protocol_8c_a70096149add47bfaceb6a1c893a9dfd1}{\index{tb\-\_\-protocol.\-c@{tb\-\_\-protocol.\-c}!get\-\_\-udp\-\_\-stats@{get\-\_\-udp\-\_\-stats}}
\index{get\-\_\-udp\-\_\-stats@{get\-\_\-udp\-\_\-stats}!tb_protocol.c@{tb\-\_\-protocol.\-c}}
\subsubsection[{get\-\_\-udp\-\_\-stats}]{\setlength{\rightskip}{0pt plus 5cm}void get\-\_\-udp\-\_\-stats (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-prot\-\_\-stats\-\_\-t} $\ast$}]{stats, }
\item[{int}]{fd}
\end{DoxyParamCaption}
)}}\label{tb__protocol_8c_a70096149add47bfaceb6a1c893a9dfd1}


Get udp stats. 



Definition at line 287 of file tb\-\_\-protocol.\-c.

\hypertarget{tb__protocol_8c_a8e38a6ede656010fb440c895610a5d10}{\index{tb\-\_\-protocol.\-c@{tb\-\_\-protocol.\-c}!get\-\_\-udt\-\_\-stats@{get\-\_\-udt\-\_\-stats}}
\index{get\-\_\-udt\-\_\-stats@{get\-\_\-udt\-\_\-stats}!tb_protocol.c@{tb\-\_\-protocol.\-c}}
\subsubsection[{get\-\_\-udt\-\_\-stats}]{\setlength{\rightskip}{0pt plus 5cm}void get\-\_\-udt\-\_\-stats (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-prot\-\_\-stats\-\_\-t} $\ast$}]{stats, }
\item[{int}]{fd}
\end{DoxyParamCaption}
)}}\label{tb__protocol_8c_a8e38a6ede656010fb440c895610a5d10}


Get udt stats. 



Definition at line 258 of file tb\-\_\-protocol.\-c.

\hypertarget{tb__protocol_8c_ae303c4e113a72eb8daf629260f13c5a3}{\index{tb\-\_\-protocol.\-c@{tb\-\_\-protocol.\-c}!get\-\_\-utp\-\_\-stats@{get\-\_\-utp\-\_\-stats}}
\index{get\-\_\-utp\-\_\-stats@{get\-\_\-utp\-\_\-stats}!tb_protocol.c@{tb\-\_\-protocol.\-c}}
\subsubsection[{get\-\_\-utp\-\_\-stats}]{\setlength{\rightskip}{0pt plus 5cm}void get\-\_\-utp\-\_\-stats (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-prot\-\_\-stats\-\_\-t} $\ast$}]{stats, }
\item[{int}]{fd}
\end{DoxyParamCaption}
)}}\label{tb__protocol_8c_ae303c4e113a72eb8daf629260f13c5a3}


Get utp stats. 



Definition at line 293 of file tb\-\_\-protocol.\-c.

\hypertarget{tb__protocol_8c_aa906a171c2fff5aaf32df7b087153ea0}{\index{tb\-\_\-protocol.\-c@{tb\-\_\-protocol.\-c}!tb\-\_\-create\-\_\-protocol@{tb\-\_\-create\-\_\-protocol}}
\index{tb\-\_\-create\-\_\-protocol@{tb\-\_\-create\-\_\-protocol}!tb_protocol.c@{tb\-\_\-protocol.\-c}}
\subsubsection[{tb\-\_\-create\-\_\-protocol}]{\setlength{\rightskip}{0pt plus 5cm}{\bf tb\-\_\-protocol\-\_\-t}$\ast$ tb\-\_\-create\-\_\-protocol (
\begin{DoxyParamCaption}
\item[{{\bf P\-R\-O\-T\-O\-C\-O\-L}}]{prot}
\end{DoxyParamCaption}
)}}\label{tb__protocol_8c_aa906a171c2fff5aaf32df7b087153ea0}


Create a new Protocol. 

Creates the protocol, and loads the struct with all of the relevant functions to perform communication.

\begin{DoxyPrecond}{Precondition}
The protocol must be one of the supported types. 
\end{DoxyPrecond}

\begin{DoxyParams}{Parameters}
{\em prot} & The protocol to use in the tests. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The struct \hyperlink{structtb__protocol__t}{tb\-\_\-protocol\-\_\-t} 
\end{DoxyReturn}


Definition at line 27 of file tb\-\_\-protocol.\-c.

\hypertarget{tb__protocol_8c_a773702577cc5960a28390c6d2c637679}{\index{tb\-\_\-protocol.\-c@{tb\-\_\-protocol.\-c}!tb\-\_\-dccp\-\_\-error@{tb\-\_\-dccp\-\_\-error}}
\index{tb\-\_\-dccp\-\_\-error@{tb\-\_\-dccp\-\_\-error}!tb_protocol.c@{tb\-\_\-protocol.\-c}}
\subsubsection[{tb\-\_\-dccp\-\_\-error}]{\setlength{\rightskip}{0pt plus 5cm}int tb\-\_\-dccp\-\_\-error (
\begin{DoxyParamCaption}
\item[{int}]{value, }
\item[{int}]{err\-\_\-no}
\end{DoxyParamCaption}
)}}\label{tb__protocol_8c_a773702577cc5960a28390c6d2c637679}


Handle errors for dccp. 



Definition at line 192 of file tb\-\_\-protocol.\-c.

\hypertarget{tb__protocol_8c_a151f709ceb08d76f790638d9f2c55f37}{\index{tb\-\_\-protocol.\-c@{tb\-\_\-protocol.\-c}!tb\-\_\-destroy\-\_\-protocol@{tb\-\_\-destroy\-\_\-protocol}}
\index{tb\-\_\-destroy\-\_\-protocol@{tb\-\_\-destroy\-\_\-protocol}!tb_protocol.c@{tb\-\_\-protocol.\-c}}
\subsubsection[{tb\-\_\-destroy\-\_\-protocol}]{\setlength{\rightskip}{0pt plus 5cm}void tb\-\_\-destroy\-\_\-protocol (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-protocol\-\_\-t} $\ast$}]{protocol}
\end{DoxyParamCaption}
)}}\label{tb__protocol_8c_a151f709ceb08d76f790638d9f2c55f37}


Destroy the given protocol structure. 

Destroys the struct, freeing up memory.

\begin{DoxyPrecond}{Precondition}
protocol must be of type \hyperlink{structtb__protocol__t}{tb\-\_\-protocol\-\_\-t}. 
\end{DoxyPrecond}

\begin{DoxyParams}{Parameters}
{\em protocol} & The struct to destroy. \\
\hline
\end{DoxyParams}


Definition at line 344 of file tb\-\_\-protocol.\-c.

\hypertarget{tb__protocol_8c_aebf261998277b8c36c9b827a3cb2f69a}{\index{tb\-\_\-protocol.\-c@{tb\-\_\-protocol.\-c}!tb\-\_\-destroy\-\_\-stats@{tb\-\_\-destroy\-\_\-stats}}
\index{tb\-\_\-destroy\-\_\-stats@{tb\-\_\-destroy\-\_\-stats}!tb_protocol.c@{tb\-\_\-protocol.\-c}}
\subsubsection[{tb\-\_\-destroy\-\_\-stats}]{\setlength{\rightskip}{0pt plus 5cm}void tb\-\_\-destroy\-\_\-stats (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-prot\-\_\-stats\-\_\-t} $\ast$}]{stats}
\end{DoxyParamCaption}
)}}\label{tb__protocol_8c_aebf261998277b8c36c9b827a3cb2f69a}


Destroy stats struct. 



Definition at line 247 of file tb\-\_\-protocol.\-c.

\hypertarget{tb__protocol_8c_a94412470e6630d5350bf784a827034c8}{\index{tb\-\_\-protocol.\-c@{tb\-\_\-protocol.\-c}!tb\-\_\-get\-\_\-bsd\-\_\-stats@{tb\-\_\-get\-\_\-bsd\-\_\-stats}}
\index{tb\-\_\-get\-\_\-bsd\-\_\-stats@{tb\-\_\-get\-\_\-bsd\-\_\-stats}!tb_protocol.c@{tb\-\_\-protocol.\-c}}
\subsubsection[{tb\-\_\-get\-\_\-bsd\-\_\-stats}]{\setlength{\rightskip}{0pt plus 5cm}void tb\-\_\-get\-\_\-bsd\-\_\-stats (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-prot\-\_\-stats\-\_\-t} $\ast$}]{stats, }
\item[{int}]{fd}
\end{DoxyParamCaption}
)}}\label{tb__protocol_8c_a94412470e6630d5350bf784a827034c8}


Get generic bsd stats. 



Definition at line 334 of file tb\-\_\-protocol.\-c.

\hypertarget{tb__protocol_8c_a5f8e49b8ee3a8b874dd58231dd099de1}{\index{tb\-\_\-protocol.\-c@{tb\-\_\-protocol.\-c}!tb\-\_\-get\-\_\-stats@{tb\-\_\-get\-\_\-stats}}
\index{tb\-\_\-get\-\_\-stats@{tb\-\_\-get\-\_\-stats}!tb_protocol.c@{tb\-\_\-protocol.\-c}}
\subsubsection[{tb\-\_\-get\-\_\-stats}]{\setlength{\rightskip}{0pt plus 5cm}void tb\-\_\-get\-\_\-stats (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-prot\-\_\-stats\-\_\-t} $\ast$}]{stats, }
\item[{int}]{fd}
\end{DoxyParamCaption}
)}}\label{tb__protocol_8c_a5f8e49b8ee3a8b874dd58231dd099de1}


Get the stats for the given protocol, with the given descriptor. 



Definition at line 215 of file tb\-\_\-protocol.\-c.

\hypertarget{tb__protocol_8c_aa2b5480d4df920972d7dec20c54ddfe9}{\index{tb\-\_\-protocol.\-c@{tb\-\_\-protocol.\-c}!tb\-\_\-print\-\_\-protocol@{tb\-\_\-print\-\_\-protocol}}
\index{tb\-\_\-print\-\_\-protocol@{tb\-\_\-print\-\_\-protocol}!tb_protocol.c@{tb\-\_\-protocol.\-c}}
\subsubsection[{tb\-\_\-print\-\_\-protocol}]{\setlength{\rightskip}{0pt plus 5cm}void tb\-\_\-print\-\_\-protocol (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-protocol\-\_\-t} $\ast$}]{protocol}
\end{DoxyParamCaption}
)}}\label{tb__protocol_8c_aa2b5480d4df920972d7dec20c54ddfe9}


Print the values for this protocol. 


\begin{DoxyParams}{Parameters}
{\em listener} & The protocol to print the values for. \\
\hline
\end{DoxyParams}


Definition at line 209 of file tb\-\_\-protocol.\-c.

\hypertarget{tb__protocol_8c_aabab4d45d896ccb2520e32d2da0a0844}{\index{tb\-\_\-protocol.\-c@{tb\-\_\-protocol.\-c}!tb\-\_\-socket\-\_\-error@{tb\-\_\-socket\-\_\-error}}
\index{tb\-\_\-socket\-\_\-error@{tb\-\_\-socket\-\_\-error}!tb_protocol.c@{tb\-\_\-protocol.\-c}}
\subsubsection[{tb\-\_\-socket\-\_\-error}]{\setlength{\rightskip}{0pt plus 5cm}int tb\-\_\-socket\-\_\-error (
\begin{DoxyParamCaption}
\item[{int}]{value, }
\item[{int}]{err\-\_\-no}
\end{DoxyParamCaption}
)}}\label{tb__protocol_8c_aabab4d45d896ccb2520e32d2da0a0844}


Handle errors for socket. 



Definition at line 185 of file tb\-\_\-protocol.\-c.

\hypertarget{tb__protocol_8c_a634f0d467979a16f779333c4f00f97cf}{\index{tb\-\_\-protocol.\-c@{tb\-\_\-protocol.\-c}!tb\-\_\-udt\-\_\-error@{tb\-\_\-udt\-\_\-error}}
\index{tb\-\_\-udt\-\_\-error@{tb\-\_\-udt\-\_\-error}!tb_protocol.c@{tb\-\_\-protocol.\-c}}
\subsubsection[{tb\-\_\-udt\-\_\-error}]{\setlength{\rightskip}{0pt plus 5cm}int tb\-\_\-udt\-\_\-error (
\begin{DoxyParamCaption}
\item[{int}]{value, }
\item[{int}]{err\-\_\-no}
\end{DoxyParamCaption}
)}}\label{tb__protocol_8c_a634f0d467979a16f779333c4f00f97cf}


Handle errors for udt. 



Definition at line 203 of file tb\-\_\-protocol.\-c.



\subsection{Variable Documentation}
\hypertarget{tb__protocol_8c_adaa45d502fac3ba218461835d3391c5c}{\index{tb\-\_\-protocol.\-c@{tb\-\_\-protocol.\-c}!socket\-\_\-error@{socket\-\_\-error}}
\index{socket\-\_\-error@{socket\-\_\-error}!tb_protocol.c@{tb\-\_\-protocol.\-c}}
\subsubsection[{socket\-\_\-error}]{\setlength{\rightskip}{0pt plus 5cm}const int socket\-\_\-error = -\/1}}\label{tb__protocol_8c_adaa45d502fac3ba218461835d3391c5c}


Definition at line 24 of file tb\-\_\-protocol.\-c.

