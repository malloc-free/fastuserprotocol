\hypertarget{tb__udp_8c}{\section{src/tb\-\_\-udp.c File Reference}
\label{tb__udp_8c}\index{src/tb\-\_\-udp.\-c@{src/tb\-\_\-udp.\-c}}
}
{\ttfamily \#include \char`\"{}tb\-\_\-udp.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}tb\-\_\-epoll.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}tb\-\_\-session.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}tb\-\_\-common.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}tb\-\_\-listener.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}tb\-\_\-worker.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}tb\-\_\-utp.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}tb\-\_\-testbed.\-h\char`\"{}}\\*
{\ttfamily \#include $<$stdio.\-h$>$}\\*
{\ttfamily \#include $<$stdlib.\-h$>$}\\*
{\ttfamily \#include $<$assert.\-h$>$}\\*
{\ttfamily \#include $<$pthread.\-h$>$}\\*
{\ttfamily \#include $<$sys/socket.\-h$>$}\\*
{\ttfamily \#include $<$fcntl.\-h$>$}\\*
{\ttfamily \#include $<$unistd.\-h$>$}\\*
{\ttfamily \#include $<$string.\-h$>$}\\*
{\ttfamily \#include $<$sys/epoll.\-h$>$}\\*
{\ttfamily \#include $<$time.\-h$>$}\\*
{\ttfamily \#include $<$sys/ioctl.\-h$>$}\\*
{\ttfamily \#include $<$netinet/in.\-h$>$}\\*
{\ttfamily \#include $<$netdb.\-h$>$}\\*
{\ttfamily \#include $<$udt.\-h$>$}\\*
{\ttfamily \#include $<$errno.\-h$>$}\\*
Include dependency graph for tb\-\_\-udp.\-c\-:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{tb__udp_8c__incl}
\end{center}
\end{figure}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{tb__udp_8c_a2d630c38c6c37789b56d70a575a1eeb5}{tb\-\_\-udp\-\_\-client} (\hyperlink{structtb__listener__t}{tb\-\_\-listener\-\_\-t} $\ast$listener)
\begin{DoxyCompactList}\small\item\em Upload a file using udp with epoll eof ack. \end{DoxyCompactList}\item 
int \hyperlink{tb__udp_8c_ac1be4ad75f9aa84b62a3cd530f822ea9}{tb\-\_\-udp\-\_\-ack} (int events, void $\ast$data)
\begin{DoxyCompactList}\small\item\em Callback function for udp. \end{DoxyCompactList}\item 
int \hyperlink{tb__udp_8c_a0e726d76f273fe0f7d77d569bbe481c0}{tb\-\_\-udp\-\_\-epoll\-\_\-client} (\hyperlink{structtb__listener__t}{tb\-\_\-listener\-\_\-t} $\ast$listener)
\begin{DoxyCompactList}\small\item\em Uses epoll for receiving data from the client. This is a prototype for T\-B0.\-2. \end{DoxyCompactList}\item 
int \hyperlink{tb__udp_8c_afeff69617372c952496e9cfebc707e1b}{tb\-\_\-udp\-\_\-m\-\_\-client} (\hyperlink{structtb__listener__t}{tb\-\_\-listener\-\_\-t} $\ast$listener)
\begin{DoxyCompactList}\small\item\em Called to create and start a udp client. \end{DoxyCompactList}\item 
int \hyperlink{tb__udp_8c_aa96de8208d00dd816bee9110ba759cf6}{tb\-\_\-udp\-\_\-server} (\hyperlink{structtb__listener__t}{tb\-\_\-listener\-\_\-t} $\ast$listener)
\begin{DoxyCompactList}\small\item\em Run a server using U\-D\-P, and epoll to signal transmission end. \end{DoxyCompactList}\item 
int \hyperlink{tb__udp_8c_a41ddaa85e718fa4afe65a979a58d7f9a}{tb\-\_\-udp\-\_\-epoll\-\_\-server} (\hyperlink{structtb__listener__t}{tb\-\_\-listener\-\_\-t} $\ast$listener)
\begin{DoxyCompactList}\small\item\em Run a server using epoll (non-\/blocking socket). \end{DoxyCompactList}\item 
int \hyperlink{tb__udp_8c_addeac1e739425f69c48947bab5e45436}{tb\-\_\-udp\-\_\-m\-\_\-server} (\hyperlink{structtb__listener__t}{tb\-\_\-listener\-\_\-t} $\ast$listener)
\begin{DoxyCompactList}\small\item\em Called to create and start a udp server. \end{DoxyCompactList}\item 
int \hyperlink{tb__udp_8c_a2b02206ecfea0b9f93e2ee1797436a04}{tb\-\_\-udp\-\_\-event} (int events, void $\ast$data)
\begin{DoxyCompactList}\small\item\em Epoll events function. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
const int \hyperlink{tb__udp_8c_a5de0325d8153dec907a2e8a9f598fa7c}{D\-A\-T\-A\-\_\-\-S\-I\-Z\-E} = 1024
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\hypertarget{tb__udp_8c_ac1be4ad75f9aa84b62a3cd530f822ea9}{\index{tb\-\_\-udp.\-c@{tb\-\_\-udp.\-c}!tb\-\_\-udp\-\_\-ack@{tb\-\_\-udp\-\_\-ack}}
\index{tb\-\_\-udp\-\_\-ack@{tb\-\_\-udp\-\_\-ack}!tb_udp.c@{tb\-\_\-udp.\-c}}
\subsubsection[{tb\-\_\-udp\-\_\-ack}]{\setlength{\rightskip}{0pt plus 5cm}int tb\-\_\-udp\-\_\-ack (
\begin{DoxyParamCaption}
\item[{int}]{events, }
\item[{void $\ast$}]{data}
\end{DoxyParamCaption}
)}}\label{tb__udp_8c_ac1be4ad75f9aa84b62a3cd530f822ea9}


Callback function for udp. 

This is the function that is called when the eof from the server has be acknowledged. 

Definition at line 105 of file tb\-\_\-udp.\-c.

\hypertarget{tb__udp_8c_a2d630c38c6c37789b56d70a575a1eeb5}{\index{tb\-\_\-udp.\-c@{tb\-\_\-udp.\-c}!tb\-\_\-udp\-\_\-client@{tb\-\_\-udp\-\_\-client}}
\index{tb\-\_\-udp\-\_\-client@{tb\-\_\-udp\-\_\-client}!tb_udp.c@{tb\-\_\-udp.\-c}}
\subsubsection[{tb\-\_\-udp\-\_\-client}]{\setlength{\rightskip}{0pt plus 5cm}int tb\-\_\-udp\-\_\-client (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-listener\-\_\-t} $\ast$}]{listener}
\end{DoxyParamCaption}
)}}\label{tb__udp_8c_a2d630c38c6c37789b56d70a575a1eeb5}


Upload a file using udp with epoll eof ack. 

The difference between upload\-\_\-random\-\_\-udp and udp is that this uses the epoll mechanism to listenen for an ack of the eof. This insures that transmission is complete in the event of packet loss. 

Definition at line 37 of file tb\-\_\-udp.\-c.

\hypertarget{tb__udp_8c_a0e726d76f273fe0f7d77d569bbe481c0}{\index{tb\-\_\-udp.\-c@{tb\-\_\-udp.\-c}!tb\-\_\-udp\-\_\-epoll\-\_\-client@{tb\-\_\-udp\-\_\-epoll\-\_\-client}}
\index{tb\-\_\-udp\-\_\-epoll\-\_\-client@{tb\-\_\-udp\-\_\-epoll\-\_\-client}!tb_udp.c@{tb\-\_\-udp.\-c}}
\subsubsection[{tb\-\_\-udp\-\_\-epoll\-\_\-client}]{\setlength{\rightskip}{0pt plus 5cm}int tb\-\_\-udp\-\_\-epoll\-\_\-client (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-listener\-\_\-t} $\ast$}]{listener}
\end{DoxyParamCaption}
)}}\label{tb__udp_8c_a0e726d76f273fe0f7d77d569bbe481c0}


Uses epoll for receiving data from the client. This is a prototype for T\-B0.\-2. 



Definition at line 117 of file tb\-\_\-udp.\-c.

\hypertarget{tb__udp_8c_a41ddaa85e718fa4afe65a979a58d7f9a}{\index{tb\-\_\-udp.\-c@{tb\-\_\-udp.\-c}!tb\-\_\-udp\-\_\-epoll\-\_\-server@{tb\-\_\-udp\-\_\-epoll\-\_\-server}}
\index{tb\-\_\-udp\-\_\-epoll\-\_\-server@{tb\-\_\-udp\-\_\-epoll\-\_\-server}!tb_udp.c@{tb\-\_\-udp.\-c}}
\subsubsection[{tb\-\_\-udp\-\_\-epoll\-\_\-server}]{\setlength{\rightskip}{0pt plus 5cm}int tb\-\_\-udp\-\_\-epoll\-\_\-server (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-listener\-\_\-t} $\ast$}]{listener}
\end{DoxyParamCaption}
)}}\label{tb__udp_8c_a41ddaa85e718fa4afe65a979a58d7f9a}


Run a server using epoll (non-\/blocking socket). 

Runs a server that uses a sockets based protocol using epoll. Not used by U\-D\-T, a\-U\-D\-T or any thing else not implemented in sockets.


\begin{DoxyParams}{Parameters}
{\em listener} & The listener to run the server with. \\
\hline
\end{DoxyParams}


Definition at line 229 of file tb\-\_\-udp.\-c.

\hypertarget{tb__udp_8c_a2b02206ecfea0b9f93e2ee1797436a04}{\index{tb\-\_\-udp.\-c@{tb\-\_\-udp.\-c}!tb\-\_\-udp\-\_\-event@{tb\-\_\-udp\-\_\-event}}
\index{tb\-\_\-udp\-\_\-event@{tb\-\_\-udp\-\_\-event}!tb_udp.c@{tb\-\_\-udp.\-c}}
\subsubsection[{tb\-\_\-udp\-\_\-event}]{\setlength{\rightskip}{0pt plus 5cm}int tb\-\_\-udp\-\_\-event (
\begin{DoxyParamCaption}
\item[{int}]{events, }
\item[{void $\ast$}]{data}
\end{DoxyParamCaption}
)}}\label{tb__udp_8c_a2b02206ecfea0b9f93e2ee1797436a04}


Epoll events function. 

This is called when events occur on sockets that are polled by epoll. Processes incoming data. 

Definition at line 269 of file tb\-\_\-udp.\-c.

\hypertarget{tb__udp_8c_afeff69617372c952496e9cfebc707e1b}{\index{tb\-\_\-udp.\-c@{tb\-\_\-udp.\-c}!tb\-\_\-udp\-\_\-m\-\_\-client@{tb\-\_\-udp\-\_\-m\-\_\-client}}
\index{tb\-\_\-udp\-\_\-m\-\_\-client@{tb\-\_\-udp\-\_\-m\-\_\-client}!tb_udp.c@{tb\-\_\-udp.\-c}}
\subsubsection[{tb\-\_\-udp\-\_\-m\-\_\-client}]{\setlength{\rightskip}{0pt plus 5cm}int tb\-\_\-udp\-\_\-m\-\_\-client (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-listener\-\_\-t} $\ast$}]{listener}
\end{DoxyParamCaption}
)}}\label{tb__udp_8c_afeff69617372c952496e9cfebc707e1b}


Called to create and start a udp client. 



Definition at line 134 of file tb\-\_\-udp.\-c.

\hypertarget{tb__udp_8c_addeac1e739425f69c48947bab5e45436}{\index{tb\-\_\-udp.\-c@{tb\-\_\-udp.\-c}!tb\-\_\-udp\-\_\-m\-\_\-server@{tb\-\_\-udp\-\_\-m\-\_\-server}}
\index{tb\-\_\-udp\-\_\-m\-\_\-server@{tb\-\_\-udp\-\_\-m\-\_\-server}!tb_udp.c@{tb\-\_\-udp.\-c}}
\subsubsection[{tb\-\_\-udp\-\_\-m\-\_\-server}]{\setlength{\rightskip}{0pt plus 5cm}int tb\-\_\-udp\-\_\-m\-\_\-server (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-listener\-\_\-t} $\ast$}]{listener}
\end{DoxyParamCaption}
)}}\label{tb__udp_8c_addeac1e739425f69c48947bab5e45436}


Called to create and start a udp server. 



Definition at line 253 of file tb\-\_\-udp.\-c.

\hypertarget{tb__udp_8c_aa96de8208d00dd816bee9110ba759cf6}{\index{tb\-\_\-udp.\-c@{tb\-\_\-udp.\-c}!tb\-\_\-udp\-\_\-server@{tb\-\_\-udp\-\_\-server}}
\index{tb\-\_\-udp\-\_\-server@{tb\-\_\-udp\-\_\-server}!tb_udp.c@{tb\-\_\-udp.\-c}}
\subsubsection[{tb\-\_\-udp\-\_\-server}]{\setlength{\rightskip}{0pt plus 5cm}int tb\-\_\-udp\-\_\-server (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-listener\-\_\-t} $\ast$}]{listener}
\end{DoxyParamCaption}
)}}\label{tb__udp_8c_aa96de8208d00dd816bee9110ba759cf6}


Run a server using U\-D\-P, and epoll to signal transmission end. 



Definition at line 182 of file tb\-\_\-udp.\-c.



\subsection{Variable Documentation}
\hypertarget{tb__udp_8c_a5de0325d8153dec907a2e8a9f598fa7c}{\index{tb\-\_\-udp.\-c@{tb\-\_\-udp.\-c}!D\-A\-T\-A\-\_\-\-S\-I\-Z\-E@{D\-A\-T\-A\-\_\-\-S\-I\-Z\-E}}
\index{D\-A\-T\-A\-\_\-\-S\-I\-Z\-E@{D\-A\-T\-A\-\_\-\-S\-I\-Z\-E}!tb_udp.c@{tb\-\_\-udp.\-c}}
\subsubsection[{D\-A\-T\-A\-\_\-\-S\-I\-Z\-E}]{\setlength{\rightskip}{0pt plus 5cm}const int D\-A\-T\-A\-\_\-\-S\-I\-Z\-E = 1024}}\label{tb__udp_8c_a5de0325d8153dec907a2e8a9f598fa7c}


Definition at line 34 of file tb\-\_\-udp.\-c.

