\hypertarget{tb__listener_8h}{\section{src/tb\-\_\-listener.h File Reference}
\label{tb__listener_8h}\index{src/tb\-\_\-listener.\-h@{src/tb\-\_\-listener.\-h}}
}
{\ttfamily \#include \char`\"{}tb\-\_\-protocol.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}tb\-\_\-epoll.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}tb\-\_\-worker.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}tb\-\_\-logging.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}tb\-\_\-session.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}tb\-\_\-sock\-\_\-opt.\-h\char`\"{}}\\*
{\ttfamily \#include $<$gdsl/gdsl\-\_\-hash.\-h$>$}\\*
{\ttfamily \#include $<$gdsl/gdsl\-\_\-heap.\-h$>$}\\*
{\ttfamily \#include $<$pthread.\-h$>$}\\*
{\ttfamily \#include $<$sys/socket.\-h$>$}\\*
{\ttfamily \#include $<$stdio.\-h$>$}\\*
{\ttfamily \#include $<$time.\-h$>$}\\*
{\ttfamily \#include $<$glib-\/2.\-0/glib/ghash.\-h$>$}\\*
Include dependency graph for tb\-\_\-listener.\-h\-:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{tb__listener_8h__incl}
\end{center}
\end{figure}
This graph shows which files directly or indirectly include this file\-:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{tb__listener_8h__dep__incl}
\end{center}
\end{figure}
\subsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structtb__test__params__t}{tb\-\_\-test\-\_\-params\-\_\-t}
\begin{DoxyCompactList}\small\item\em struct used to pass parameters into testbed. \end{DoxyCompactList}\item 
struct \hyperlink{structtb__listener__t}{tb\-\_\-listener\-\_\-t}
\begin{DoxyCompactList}\small\item\em struct that defines the fields for the listener class. \end{DoxyCompactList}\item 
struct \hyperlink{structtb__other__info}{tb\-\_\-other\-\_\-info}
\begin{DoxyCompactList}\small\item\em struct that contains information on the current status of the listener. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef void($\ast$ \hyperlink{tb__listener_8h_a087aa7eae6394f6a052ea86a8944b262}{funct\-\_\-l\-\_\-exit} )(void $\ast$listener)
\item 
typedef void($\ast$ \hyperlink{tb__listener_8h_a26990e2906e18234aa32e757383e1752}{funct\-\_\-l\-\_\-abort} )(void $\ast$listener)
\end{DoxyCompactItemize}
\subsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
enum \hyperlink{tb__listener_8h_ae37f3ebcf0081b2dd11adf41f1f867d6}{E\-N\-D\-P\-O\-I\-N\-T\-\_\-\-T\-Y\-P\-E} \{ \hyperlink{tb__listener_8h_ae37f3ebcf0081b2dd11adf41f1f867d6a67c96b24b23bcb408bae7626730a04b7}{S\-E\-R\-V\-E\-R} =  0, 
\hyperlink{tb__listener_8h_ae37f3ebcf0081b2dd11adf41f1f867d6a48e4cb37544c8e69715d45e5a83b2109}{C\-L\-I\-E\-N\-T}, 
\hyperlink{tb__listener_8h_ae37f3ebcf0081b2dd11adf41f1f867d6a279284d2b9d6f1a10042b926951b77ab}{m\-S\-E\-R\-V\-E\-R}, 
\hyperlink{tb__listener_8h_ae37f3ebcf0081b2dd11adf41f1f867d6aee914d963bee5cbcdec16ea2d5432d75}{m\-C\-L\-I\-E\-N\-T}
 \}
\begin{DoxyCompactList}\small\item\em The type of endpoint to create. \end{DoxyCompactList}\item 
enum \hyperlink{tb__listener_8h_a32c27cc471df37f4fc818d65de0a56c4}{S\-T\-A\-T\-U\-S} \{ \\*
\hyperlink{tb__listener_8h_a32c27cc471df37f4fc818d65de0a56c4a7ef9ab2ee648332deb26886b5f5a198e}{T\-B\-\_\-\-C\-R\-E\-A\-T\-E\-D} =  0, 
\hyperlink{tb__listener_8h_a32c27cc471df37f4fc818d65de0a56c4ae3f258303bb903e4a10660a64c2af1ee}{T\-B\-\_\-\-S\-T\-A\-R\-T\-I\-N\-G} =  1, 
\hyperlink{tb__listener_8h_a32c27cc471df37f4fc818d65de0a56c4a85db1220e76bb25e4d4bac5b3c3b524f}{T\-B\-\_\-\-C\-O\-N\-N\-E\-C\-T\-E\-D} =  2, 
\hyperlink{tb__listener_8h_a32c27cc471df37f4fc818d65de0a56c4ad4e334774bf8113c5f695116c31e4fc0}{T\-B\-\_\-\-D\-I\-S\-C\-O\-N\-N\-E\-C\-T\-E\-D} =  3, 
\\*
\hyperlink{tb__listener_8h_a32c27cc471df37f4fc818d65de0a56c4a0431dc834b1dedce4f5694b274f7d22e}{T\-B\-\_\-\-L\-I\-S\-T\-E\-N\-I\-N\-G} =  4, 
\hyperlink{tb__listener_8h_a32c27cc471df37f4fc818d65de0a56c4a2a7704cb5e60a9f197267978817c7007}{T\-B\-\_\-\-E\-X\-I\-T\-I\-N\-G} =  5, 
\hyperlink{tb__listener_8h_a32c27cc471df37f4fc818d65de0a56c4aa5e00e821cf2b9ce1dd4286178970058}{T\-B\-\_\-\-A\-B\-O\-R\-T\-I\-N\-G} =  6, 
\hyperlink{tb__listener_8h_a32c27cc471df37f4fc818d65de0a56c4a5d8f10dd221cadd7fdabb80df931d575}{T\-B\-\_\-\-P\-O\-L\-L\-I\-N\-G} =  7
 \}
\item 
enum \hyperlink{tb__listener_8h_a0fbada5bff0eeb4dc6be4b6e6f1c4eaf}{C\-O\-M\-M\-A\-N\-D} \{ \hyperlink{tb__listener_8h_a0fbada5bff0eeb4dc6be4b6e6f1c4eafa13e252fc01cca534ed6aa612e99f2173}{T\-B\-\_\-\-C\-O\-N\-T\-I\-N\-U\-E} =  1, 
\hyperlink{tb__listener_8h_a0fbada5bff0eeb4dc6be4b6e6f1c4eafaf76138418fd9d2bb1c239fc8c68a8774}{T\-B\-\_\-\-A\-B\-O\-R\-T} =  2, 
\hyperlink{tb__listener_8h_a0fbada5bff0eeb4dc6be4b6e6f1c4eafa96efcde6db8a86a5aea96d8a5963a7c4}{T\-B\-\_\-\-E\-X\-I\-T} =  4, 
\hyperlink{tb__listener_8h_a0fbada5bff0eeb4dc6be4b6e6f1c4eafa931ee640196d62acef98f47b54b20a4d}{T\-B\-\_\-\-E\-\_\-\-L\-O\-O\-P} =  T\-B\-\_\-\-A\-B\-O\-R\-T $|$ T\-B\-\_\-\-E\-X\-I\-T
 \}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{tb__listener_8h_ae063a1fdce497a4e08aea504a6ab927b}{tb\-\_\-set\-\_\-l\-\_\-stats} (\hyperlink{structtb__listener__t}{tb\-\_\-listener\-\_\-t} $\ast$listener)
\begin{DoxyCompactList}\small\item\em Gets the stats for the listener. \end{DoxyCompactList}\item 
void \hyperlink{tb__listener_8h_a144e59e2470a90fc2b6e1f840da77ae8}{tb\-\_\-set\-\_\-m\-\_\-stats} (\hyperlink{structtb__listener__t}{tb\-\_\-listener\-\_\-t} $\ast$listener)
\begin{DoxyCompactList}\small\item\em Gets the stats for the listener. \end{DoxyCompactList}\item 
\hyperlink{structtb__prot__stats__t}{tb\-\_\-prot\-\_\-stats\-\_\-t} $\ast$ \hyperlink{tb__listener_8h_a6e5c88a915882ea9d39fd41ee4742ffc}{tb\-\_\-ex\-\_\-get\-\_\-stats} (\hyperlink{structtb__listener__t}{tb\-\_\-listener\-\_\-t} $\ast$listener)
\begin{DoxyCompactList}\small\item\em A thread safe way to get access to stats. \end{DoxyCompactList}\item 
\hyperlink{structtb__listener__t}{tb\-\_\-listener\-\_\-t} $\ast$ \hyperlink{tb__listener_8h_a5ec3b6c120621050965582e51e4d0d5a}{tb\-\_\-create\-\_\-listener} (\hyperlink{tb__listener_8h_ae37f3ebcf0081b2dd11adf41f1f867d6}{E\-N\-D\-P\-O\-I\-N\-T\-\_\-\-T\-Y\-P\-E} type, char $\ast$addr, char $\ast$port, \hyperlink{tb__protocol_8h_a7a5bff1040fc154c510874327d44cc1a}{P\-R\-O\-T\-O\-C\-O\-L} protocol, int bufsize)
\begin{DoxyCompactList}\small\item\em Create a listener with the supplied parameters. \end{DoxyCompactList}\item 
\hyperlink{structtb__listener__t}{tb\-\_\-listener\-\_\-t} $\ast$ \hyperlink{tb__listener_8h_a042a2b565ccc70e1506562ad43c83bfb}{tb\-\_\-create\-\_\-endpoint} (\hyperlink{structtb__test__params__t}{tb\-\_\-test\-\_\-params\-\_\-t} $\ast$params)
\begin{DoxyCompactList}\small\item\em Create a listener using a \hyperlink{structtb__test__params__t}{tb\-\_\-test\-\_\-params\-\_\-t} struct. \end{DoxyCompactList}\item 
\hyperlink{structtb__worker__t}{tb\-\_\-worker\-\_\-t} $\ast$ \hyperlink{tb__listener_8h_aadc6c1af686cf9fc7bbd8874eca3be42}{tb\-\_\-get\-\_\-worker} (\hyperlink{structtb__listener__t}{tb\-\_\-listener\-\_\-t} $\ast$listener, \hyperlink{structtb__session__t}{tb\-\_\-session\-\_\-t} $\ast$session)
\begin{DoxyCompactList}\small\item\em Get a worker for the supplied session. \end{DoxyCompactList}\item 
void \hyperlink{tb__listener_8h_a370d0eb443de6db87ab002ea2e5cc468}{tb\-\_\-destroy\-\_\-listener} (\hyperlink{structtb__listener__t}{tb\-\_\-listener\-\_\-t} $\ast$listener)
\begin{DoxyCompactList}\small\item\em Destroy a listener. \end{DoxyCompactList}\item 
int \hyperlink{tb__listener_8h_a3ef8c04e8f0f2aed65b59821d3a1b01d}{tb\-\_\-set\-\_\-therad\-\_\-param} (\hyperlink{structtb__listener__t}{tb\-\_\-listener\-\_\-t} $\ast$listener)
\begin{DoxyCompactList}\small\item\em Set the affinity and scheduling priority for a given thread. \end{DoxyCompactList}\item 
void \hyperlink{tb__listener_8h_aa1646d6df4318c903d2653a6032a0a40}{tb\-\_\-get\-\_\-cpu\-\_\-info} (\hyperlink{structtb__listener__t}{tb\-\_\-listener\-\_\-t} $\ast$listener)
\item 
void \hyperlink{tb__listener_8h_af552255cac39c1b712a1c213070c04e0}{tb\-\_\-print\-\_\-listener} (\hyperlink{structtb__listener__t}{tb\-\_\-listener\-\_\-t} $\ast$listener)
\begin{DoxyCompactList}\small\item\em Print a listener. \end{DoxyCompactList}\item 
int \hyperlink{tb__listener_8h_aedd19f27c5b2e1d8717024afed30ec51}{tb\-\_\-resolve\-\_\-address} (\hyperlink{structtb__listener__t}{tb\-\_\-listener\-\_\-t} $\ast$listener)
\begin{DoxyCompactList}\small\item\em Resolve the address for the given listener. \end{DoxyCompactList}\item 
int \hyperlink{tb__listener_8h_a15dfa6415134b86b0a24bb01eece50ee}{tb\-\_\-set\-\_\-sockopt} (\hyperlink{structtb__listener__t}{tb\-\_\-listener\-\_\-t} $\ast$listener)
\begin{DoxyCompactList}\small\item\em Set sockopt. \end{DoxyCompactList}\item 
int \hyperlink{tb__listener_8h_ac2e55c5098e2f7105812f5947860cf45}{tb\-\_\-create\-\_\-socket} (\hyperlink{structtb__listener__t}{tb\-\_\-listener\-\_\-t} $\ast$listener) \-\_\-\-\_\-attribute\-\_\-\-\_\-((always\-\_\-inline))
\begin{DoxyCompactList}\small\item\em Create a socket. \end{DoxyCompactList}\item 
int \hyperlink{tb__listener_8h_a818e46957ec1b6d9498b03c42d3e962a}{tb\-\_\-listen} (\hyperlink{structtb__listener__t}{tb\-\_\-listener\-\_\-t} $\ast$listener) \-\_\-\-\_\-attribute\-\_\-\-\_\-((always\-\_\-inline))
\begin{DoxyCompactList}\small\item\em Bind and listen. \end{DoxyCompactList}\item 
\hyperlink{structtb__session__t}{tb\-\_\-session\-\_\-t} $\ast$ \hyperlink{tb__listener_8h_a60e447ffac92a59d8fcc6eb9e343db34}{tb\-\_\-accept} (\hyperlink{structtb__listener__t}{tb\-\_\-listener\-\_\-t} $\ast$listener) \-\_\-\-\_\-attribute\-\_\-\-\_\-((always\-\_\-inline)) \-\_\-\-\_\-attribute\-\_\-\-\_\-((deprecated))
\begin{DoxyCompactList}\small\item\em Accept an incoming connection. \end{DoxyCompactList}\item 
int \hyperlink{tb__listener_8h_ab13164809a5b7d6ce88a2e3156096f8c}{tb\-\_\-connect} (\hyperlink{structtb__listener__t}{tb\-\_\-listener\-\_\-t} $\ast$listener) \-\_\-\-\_\-attribute\-\_\-\-\_\-((always\-\_\-inline))
\begin{DoxyCompactList}\small\item\em Attempt to connect. \end{DoxyCompactList}\item 
int \hyperlink{tb__listener_8h_ae886708c5c2a62a435422948143d6e69}{tb\-\_\-bind} (\hyperlink{structtb__listener__t}{tb\-\_\-listener\-\_\-t} $\ast$listener) \-\_\-\-\_\-attribute\-\_\-\-\_\-((always\-\_\-inline))
\begin{DoxyCompactList}\small\item\em Bind the listener to its address. \end{DoxyCompactList}\item 
int \hyperlink{tb__listener_8h_a9801fb8797f4a9bab6e99be129ff3304}{tb\-\_\-send\-\_\-data} (\hyperlink{structtb__listener__t}{tb\-\_\-listener\-\_\-t} $\ast$listener, char $\ast$buff, int size) \-\_\-\-\_\-attribute\-\_\-\-\_\-((always\-\_\-inline))
\begin{DoxyCompactList}\small\item\em Send data. \end{DoxyCompactList}\item 
int \hyperlink{tb__listener_8h_ae2ea1c34daca7877a7acae3afa17427f}{tb\-\_\-recv\-\_\-data} (\hyperlink{structtb__listener__t}{tb\-\_\-listener\-\_\-t} $\ast$listener, \hyperlink{structtb__session__t}{tb\-\_\-session\-\_\-t} $\ast$session) \-\_\-\-\_\-attribute\-\_\-\-\_\-((always\-\_\-inline))
\begin{DoxyCompactList}\small\item\em Receive data. \end{DoxyCompactList}\item 
int \hyperlink{tb__listener_8h_ae70c851b28d81589f2648ce018e727bd}{tb\-\_\-send\-\_\-to} (\hyperlink{structtb__listener__t}{tb\-\_\-listener\-\_\-t} $\ast$listener, \hyperlink{structtb__session__t}{tb\-\_\-session\-\_\-t} $\ast$session) \-\_\-\-\_\-attribute\-\_\-\-\_\-((always\-\_\-inline))
\item 
int \hyperlink{tb__listener_8h_afec61a9f694c57aec84cc5a2d520b001}{tb\-\_\-recv\-\_\-from} (\hyperlink{structtb__listener__t}{tb\-\_\-listener\-\_\-t} $\ast$listener, \hyperlink{structtb__session__t}{tb\-\_\-session\-\_\-t} $\ast$session) \-\_\-\-\_\-attribute\-\_\-\-\_\-((always\-\_\-inline))
\begin{DoxyCompactList}\small\item\em recv from -\/ used by U\-D\-P. \end{DoxyCompactList}\item 
void \hyperlink{tb__listener_8h_ac09710b23dca8fcf1c05f4bd4c707b7a}{tb\-\_\-get\-\_\-prot\-\_\-stats} (\hyperlink{structtb__listener__t}{tb\-\_\-listener\-\_\-t} $\ast$listener)
\begin{DoxyCompactList}\small\item\em collect stats for listener. \end{DoxyCompactList}\item 
int \hyperlink{tb__listener_8h_a633cfdcf57f29c6e1ae09044ed483794}{tb\-\_\-set\-\_\-epoll} (\hyperlink{structtb__listener__t}{tb\-\_\-listener\-\_\-t} $\ast$listener) \-\_\-\-\_\-attribute\-\_\-\-\_\-((always\-\_\-inline))
\begin{DoxyCompactList}\small\item\em Set epoll for this listener. \end{DoxyCompactList}\item 
void \hyperlink{tb__listener_8h_a233900871cf97b4af517dcf4bbdd5d6b}{tb\-\_\-error} (\hyperlink{structtb__listener__t}{tb\-\_\-listener\-\_\-t} $\ast$listener, const char $\ast$info, int errno) \-\_\-\-\_\-attribute\-\_\-\-\_\-((always\-\_\-inline))
\begin{DoxyCompactList}\small\item\em Format an error to the log file. \end{DoxyCompactList}\item 
void \hyperlink{tb__listener_8h_ae35166dd784547cfb9d71a3b9af3dd2b}{tb\-\_\-address} (\hyperlink{structtb__listener__t}{tb\-\_\-listener\-\_\-t} $\ast$listener, const char $\ast$info, struct sockaddr\-\_\-storage $\ast$store) \-\_\-\-\_\-attribute\-\_\-\-\_\-((always\-\_\-inline))
\end{DoxyCompactItemize}


\subsection{Typedef Documentation}
\hypertarget{tb__listener_8h_a26990e2906e18234aa32e757383e1752}{\index{tb\-\_\-listener.\-h@{tb\-\_\-listener.\-h}!funct\-\_\-l\-\_\-abort@{funct\-\_\-l\-\_\-abort}}
\index{funct\-\_\-l\-\_\-abort@{funct\-\_\-l\-\_\-abort}!tb_listener.h@{tb\-\_\-listener.\-h}}
\subsubsection[{funct\-\_\-l\-\_\-abort}]{\setlength{\rightskip}{0pt plus 5cm}typedef void($\ast$ funct\-\_\-l\-\_\-abort)(void $\ast$listener)}}\label{tb__listener_8h_a26990e2906e18234aa32e757383e1752}


Definition at line 129 of file tb\-\_\-listener.\-h.

\hypertarget{tb__listener_8h_a087aa7eae6394f6a052ea86a8944b262}{\index{tb\-\_\-listener.\-h@{tb\-\_\-listener.\-h}!funct\-\_\-l\-\_\-exit@{funct\-\_\-l\-\_\-exit}}
\index{funct\-\_\-l\-\_\-exit@{funct\-\_\-l\-\_\-exit}!tb_listener.h@{tb\-\_\-listener.\-h}}
\subsubsection[{funct\-\_\-l\-\_\-exit}]{\setlength{\rightskip}{0pt plus 5cm}typedef void($\ast$ funct\-\_\-l\-\_\-exit)(void $\ast$listener)}}\label{tb__listener_8h_a087aa7eae6394f6a052ea86a8944b262}


Definition at line 123 of file tb\-\_\-listener.\-h.



\subsection{Enumeration Type Documentation}
\hypertarget{tb__listener_8h_a0fbada5bff0eeb4dc6be4b6e6f1c4eaf}{\index{tb\-\_\-listener.\-h@{tb\-\_\-listener.\-h}!C\-O\-M\-M\-A\-N\-D@{C\-O\-M\-M\-A\-N\-D}}
\index{C\-O\-M\-M\-A\-N\-D@{C\-O\-M\-M\-A\-N\-D}!tb_listener.h@{tb\-\_\-listener.\-h}}
\subsubsection[{C\-O\-M\-M\-A\-N\-D}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf C\-O\-M\-M\-A\-N\-D}}}\label{tb__listener_8h_a0fbada5bff0eeb4dc6be4b6e6f1c4eaf}
\begin{Desc}
\item[Enumerator\-: ]\par
\begin{description}
\index{T\-B\-\_\-\-C\-O\-N\-T\-I\-N\-U\-E@{T\-B\-\_\-\-C\-O\-N\-T\-I\-N\-U\-E}!tb\-\_\-listener.\-h@{tb\-\_\-listener.\-h}}\index{tb\-\_\-listener.\-h@{tb\-\_\-listener.\-h}!T\-B\-\_\-\-C\-O\-N\-T\-I\-N\-U\-E@{T\-B\-\_\-\-C\-O\-N\-T\-I\-N\-U\-E}}\item[{\em 
\hypertarget{tb__listener_8h_a0fbada5bff0eeb4dc6be4b6e6f1c4eafa13e252fc01cca534ed6aa612e99f2173}{T\-B\-\_\-\-C\-O\-N\-T\-I\-N\-U\-E}\label{tb__listener_8h_a0fbada5bff0eeb4dc6be4b6e6f1c4eafa13e252fc01cca534ed6aa612e99f2173}
}]Regular status. \index{T\-B\-\_\-\-A\-B\-O\-R\-T@{T\-B\-\_\-\-A\-B\-O\-R\-T}!tb\-\_\-listener.\-h@{tb\-\_\-listener.\-h}}\index{tb\-\_\-listener.\-h@{tb\-\_\-listener.\-h}!T\-B\-\_\-\-A\-B\-O\-R\-T@{T\-B\-\_\-\-A\-B\-O\-R\-T}}\item[{\em 
\hypertarget{tb__listener_8h_a0fbada5bff0eeb4dc6be4b6e6f1c4eafaf76138418fd9d2bb1c239fc8c68a8774}{T\-B\-\_\-\-A\-B\-O\-R\-T}\label{tb__listener_8h_a0fbada5bff0eeb4dc6be4b6e6f1c4eafaf76138418fd9d2bb1c239fc8c68a8774}
}]Abort the current operation. \index{T\-B\-\_\-\-E\-X\-I\-T@{T\-B\-\_\-\-E\-X\-I\-T}!tb\-\_\-listener.\-h@{tb\-\_\-listener.\-h}}\index{tb\-\_\-listener.\-h@{tb\-\_\-listener.\-h}!T\-B\-\_\-\-E\-X\-I\-T@{T\-B\-\_\-\-E\-X\-I\-T}}\item[{\em 
\hypertarget{tb__listener_8h_a0fbada5bff0eeb4dc6be4b6e6f1c4eafa96efcde6db8a86a5aea96d8a5963a7c4}{T\-B\-\_\-\-E\-X\-I\-T}\label{tb__listener_8h_a0fbada5bff0eeb4dc6be4b6e6f1c4eafa96efcde6db8a86a5aea96d8a5963a7c4}
}]Exit from the current operation. \index{T\-B\-\_\-\-E\-\_\-\-L\-O\-O\-P@{T\-B\-\_\-\-E\-\_\-\-L\-O\-O\-P}!tb\-\_\-listener.\-h@{tb\-\_\-listener.\-h}}\index{tb\-\_\-listener.\-h@{tb\-\_\-listener.\-h}!T\-B\-\_\-\-E\-\_\-\-L\-O\-O\-P@{T\-B\-\_\-\-E\-\_\-\-L\-O\-O\-P}}\item[{\em 
\hypertarget{tb__listener_8h_a0fbada5bff0eeb4dc6be4b6e6f1c4eafa931ee640196d62acef98f47b54b20a4d}{T\-B\-\_\-\-E\-\_\-\-L\-O\-O\-P}\label{tb__listener_8h_a0fbada5bff0eeb4dc6be4b6e6f1c4eafa931ee640196d62acef98f47b54b20a4d}
}]Exit from loop. \end{description}
\end{Desc}



Definition at line 64 of file tb\-\_\-listener.\-h.

\hypertarget{tb__listener_8h_ae37f3ebcf0081b2dd11adf41f1f867d6}{\index{tb\-\_\-listener.\-h@{tb\-\_\-listener.\-h}!E\-N\-D\-P\-O\-I\-N\-T\-\_\-\-T\-Y\-P\-E@{E\-N\-D\-P\-O\-I\-N\-T\-\_\-\-T\-Y\-P\-E}}
\index{E\-N\-D\-P\-O\-I\-N\-T\-\_\-\-T\-Y\-P\-E@{E\-N\-D\-P\-O\-I\-N\-T\-\_\-\-T\-Y\-P\-E}!tb_listener.h@{tb\-\_\-listener.\-h}}
\subsubsection[{E\-N\-D\-P\-O\-I\-N\-T\-\_\-\-T\-Y\-P\-E}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf E\-N\-D\-P\-O\-I\-N\-T\-\_\-\-T\-Y\-P\-E}}}\label{tb__listener_8h_ae37f3ebcf0081b2dd11adf41f1f867d6}


The type of endpoint to create. 

\begin{quotation}
\mbox{[}\hyperlink{tb__listener_8h}{tb\-\_\-listener.\-h}\mbox{]} \end{quotation}
\begin{Desc}
\item[Enumerator\-: ]\par
\begin{description}
\index{S\-E\-R\-V\-E\-R@{S\-E\-R\-V\-E\-R}!tb\-\_\-listener.\-h@{tb\-\_\-listener.\-h}}\index{tb\-\_\-listener.\-h@{tb\-\_\-listener.\-h}!S\-E\-R\-V\-E\-R@{S\-E\-R\-V\-E\-R}}\item[{\em 
\hypertarget{tb__listener_8h_ae37f3ebcf0081b2dd11adf41f1f867d6a67c96b24b23bcb408bae7626730a04b7}{S\-E\-R\-V\-E\-R}\label{tb__listener_8h_ae37f3ebcf0081b2dd11adf41f1f867d6a67c96b24b23bcb408bae7626730a04b7}
}]The listener is a server. \index{C\-L\-I\-E\-N\-T@{C\-L\-I\-E\-N\-T}!tb\-\_\-listener.\-h@{tb\-\_\-listener.\-h}}\index{tb\-\_\-listener.\-h@{tb\-\_\-listener.\-h}!C\-L\-I\-E\-N\-T@{C\-L\-I\-E\-N\-T}}\item[{\em 
\hypertarget{tb__listener_8h_ae37f3ebcf0081b2dd11adf41f1f867d6a48e4cb37544c8e69715d45e5a83b2109}{C\-L\-I\-E\-N\-T}\label{tb__listener_8h_ae37f3ebcf0081b2dd11adf41f1f867d6a48e4cb37544c8e69715d45e5a83b2109}
}]The listener is a client. \index{m\-S\-E\-R\-V\-E\-R@{m\-S\-E\-R\-V\-E\-R}!tb\-\_\-listener.\-h@{tb\-\_\-listener.\-h}}\index{tb\-\_\-listener.\-h@{tb\-\_\-listener.\-h}!m\-S\-E\-R\-V\-E\-R@{m\-S\-E\-R\-V\-E\-R}}\item[{\em 
\hypertarget{tb__listener_8h_ae37f3ebcf0081b2dd11adf41f1f867d6a279284d2b9d6f1a10042b926951b77ab}{m\-S\-E\-R\-V\-E\-R}\label{tb__listener_8h_ae37f3ebcf0081b2dd11adf41f1f867d6a279284d2b9d6f1a10042b926951b77ab}
}]Multi connection server. \index{m\-C\-L\-I\-E\-N\-T@{m\-C\-L\-I\-E\-N\-T}!tb\-\_\-listener.\-h@{tb\-\_\-listener.\-h}}\index{tb\-\_\-listener.\-h@{tb\-\_\-listener.\-h}!m\-C\-L\-I\-E\-N\-T@{m\-C\-L\-I\-E\-N\-T}}\item[{\em 
\hypertarget{tb__listener_8h_ae37f3ebcf0081b2dd11adf41f1f867d6aee914d963bee5cbcdec16ea2d5432d75}{m\-C\-L\-I\-E\-N\-T}\label{tb__listener_8h_ae37f3ebcf0081b2dd11adf41f1f867d6aee914d963bee5cbcdec16ea2d5432d75}
}]Multi connection client. \end{description}
\end{Desc}



Definition at line 32 of file tb\-\_\-listener.\-h.

\hypertarget{tb__listener_8h_a32c27cc471df37f4fc818d65de0a56c4}{\index{tb\-\_\-listener.\-h@{tb\-\_\-listener.\-h}!S\-T\-A\-T\-U\-S@{S\-T\-A\-T\-U\-S}}
\index{S\-T\-A\-T\-U\-S@{S\-T\-A\-T\-U\-S}!tb_listener.h@{tb\-\_\-listener.\-h}}
\subsubsection[{S\-T\-A\-T\-U\-S}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf S\-T\-A\-T\-U\-S}}}\label{tb__listener_8h_a32c27cc471df37f4fc818d65de0a56c4}
\begin{quotation}
\mbox{[}\hyperlink{tb__listener_8h}{tb\-\_\-listener.\-h}\mbox{]}

\end{quotation}


Specifies the current state of the testbed. \begin{Desc}
\item[Enumerator\-: ]\par
\begin{description}
\index{T\-B\-\_\-\-C\-R\-E\-A\-T\-E\-D@{T\-B\-\_\-\-C\-R\-E\-A\-T\-E\-D}!tb\-\_\-listener.\-h@{tb\-\_\-listener.\-h}}\index{tb\-\_\-listener.\-h@{tb\-\_\-listener.\-h}!T\-B\-\_\-\-C\-R\-E\-A\-T\-E\-D@{T\-B\-\_\-\-C\-R\-E\-A\-T\-E\-D}}\item[{\em 
\hypertarget{tb__listener_8h_a32c27cc471df37f4fc818d65de0a56c4a7ef9ab2ee648332deb26886b5f5a198e}{T\-B\-\_\-\-C\-R\-E\-A\-T\-E\-D}\label{tb__listener_8h_a32c27cc471df37f4fc818d65de0a56c4a7ef9ab2ee648332deb26886b5f5a198e}
}]The listener has been created. \index{T\-B\-\_\-\-S\-T\-A\-R\-T\-I\-N\-G@{T\-B\-\_\-\-S\-T\-A\-R\-T\-I\-N\-G}!tb\-\_\-listener.\-h@{tb\-\_\-listener.\-h}}\index{tb\-\_\-listener.\-h@{tb\-\_\-listener.\-h}!T\-B\-\_\-\-S\-T\-A\-R\-T\-I\-N\-G@{T\-B\-\_\-\-S\-T\-A\-R\-T\-I\-N\-G}}\item[{\em 
\hypertarget{tb__listener_8h_a32c27cc471df37f4fc818d65de0a56c4ae3f258303bb903e4a10660a64c2af1ee}{T\-B\-\_\-\-S\-T\-A\-R\-T\-I\-N\-G}\label{tb__listener_8h_a32c27cc471df37f4fc818d65de0a56c4ae3f258303bb903e4a10660a64c2af1ee}
}]The listener is starting up. \index{T\-B\-\_\-\-C\-O\-N\-N\-E\-C\-T\-E\-D@{T\-B\-\_\-\-C\-O\-N\-N\-E\-C\-T\-E\-D}!tb\-\_\-listener.\-h@{tb\-\_\-listener.\-h}}\index{tb\-\_\-listener.\-h@{tb\-\_\-listener.\-h}!T\-B\-\_\-\-C\-O\-N\-N\-E\-C\-T\-E\-D@{T\-B\-\_\-\-C\-O\-N\-N\-E\-C\-T\-E\-D}}\item[{\em 
\hypertarget{tb__listener_8h_a32c27cc471df37f4fc818d65de0a56c4a85db1220e76bb25e4d4bac5b3c3b524f}{T\-B\-\_\-\-C\-O\-N\-N\-E\-C\-T\-E\-D}\label{tb__listener_8h_a32c27cc471df37f4fc818d65de0a56c4a85db1220e76bb25e4d4bac5b3c3b524f}
}]The listener is connected. \index{T\-B\-\_\-\-D\-I\-S\-C\-O\-N\-N\-E\-C\-T\-E\-D@{T\-B\-\_\-\-D\-I\-S\-C\-O\-N\-N\-E\-C\-T\-E\-D}!tb\-\_\-listener.\-h@{tb\-\_\-listener.\-h}}\index{tb\-\_\-listener.\-h@{tb\-\_\-listener.\-h}!T\-B\-\_\-\-D\-I\-S\-C\-O\-N\-N\-E\-C\-T\-E\-D@{T\-B\-\_\-\-D\-I\-S\-C\-O\-N\-N\-E\-C\-T\-E\-D}}\item[{\em 
\hypertarget{tb__listener_8h_a32c27cc471df37f4fc818d65de0a56c4ad4e334774bf8113c5f695116c31e4fc0}{T\-B\-\_\-\-D\-I\-S\-C\-O\-N\-N\-E\-C\-T\-E\-D}\label{tb__listener_8h_a32c27cc471df37f4fc818d65de0a56c4ad4e334774bf8113c5f695116c31e4fc0}
}]The listener is disconnected. \index{T\-B\-\_\-\-L\-I\-S\-T\-E\-N\-I\-N\-G@{T\-B\-\_\-\-L\-I\-S\-T\-E\-N\-I\-N\-G}!tb\-\_\-listener.\-h@{tb\-\_\-listener.\-h}}\index{tb\-\_\-listener.\-h@{tb\-\_\-listener.\-h}!T\-B\-\_\-\-L\-I\-S\-T\-E\-N\-I\-N\-G@{T\-B\-\_\-\-L\-I\-S\-T\-E\-N\-I\-N\-G}}\item[{\em 
\hypertarget{tb__listener_8h_a32c27cc471df37f4fc818d65de0a56c4a0431dc834b1dedce4f5694b274f7d22e}{T\-B\-\_\-\-L\-I\-S\-T\-E\-N\-I\-N\-G}\label{tb__listener_8h_a32c27cc471df37f4fc818d65de0a56c4a0431dc834b1dedce4f5694b274f7d22e}
}]The listener is listening for incoming connections. \index{T\-B\-\_\-\-E\-X\-I\-T\-I\-N\-G@{T\-B\-\_\-\-E\-X\-I\-T\-I\-N\-G}!tb\-\_\-listener.\-h@{tb\-\_\-listener.\-h}}\index{tb\-\_\-listener.\-h@{tb\-\_\-listener.\-h}!T\-B\-\_\-\-E\-X\-I\-T\-I\-N\-G@{T\-B\-\_\-\-E\-X\-I\-T\-I\-N\-G}}\item[{\em 
\hypertarget{tb__listener_8h_a32c27cc471df37f4fc818d65de0a56c4a2a7704cb5e60a9f197267978817c7007}{T\-B\-\_\-\-E\-X\-I\-T\-I\-N\-G}\label{tb__listener_8h_a32c27cc471df37f4fc818d65de0a56c4a2a7704cb5e60a9f197267978817c7007}
}]The listener is exiting. \index{T\-B\-\_\-\-A\-B\-O\-R\-T\-I\-N\-G@{T\-B\-\_\-\-A\-B\-O\-R\-T\-I\-N\-G}!tb\-\_\-listener.\-h@{tb\-\_\-listener.\-h}}\index{tb\-\_\-listener.\-h@{tb\-\_\-listener.\-h}!T\-B\-\_\-\-A\-B\-O\-R\-T\-I\-N\-G@{T\-B\-\_\-\-A\-B\-O\-R\-T\-I\-N\-G}}\item[{\em 
\hypertarget{tb__listener_8h_a32c27cc471df37f4fc818d65de0a56c4aa5e00e821cf2b9ce1dd4286178970058}{T\-B\-\_\-\-A\-B\-O\-R\-T\-I\-N\-G}\label{tb__listener_8h_a32c27cc471df37f4fc818d65de0a56c4aa5e00e821cf2b9ce1dd4286178970058}
}]The listener is aborting. \index{T\-B\-\_\-\-P\-O\-L\-L\-I\-N\-G@{T\-B\-\_\-\-P\-O\-L\-L\-I\-N\-G}!tb\-\_\-listener.\-h@{tb\-\_\-listener.\-h}}\index{tb\-\_\-listener.\-h@{tb\-\_\-listener.\-h}!T\-B\-\_\-\-P\-O\-L\-L\-I\-N\-G@{T\-B\-\_\-\-P\-O\-L\-L\-I\-N\-G}}\item[{\em 
\hypertarget{tb__listener_8h_a32c27cc471df37f4fc818d65de0a56c4a5d8f10dd221cadd7fdabb80df931d575}{T\-B\-\_\-\-P\-O\-L\-L\-I\-N\-G}\label{tb__listener_8h_a32c27cc471df37f4fc818d65de0a56c4a5d8f10dd221cadd7fdabb80df931d575}
}]The listener is polling. \end{description}
\end{Desc}



Definition at line 46 of file tb\-\_\-listener.\-h.



\subsection{Function Documentation}
\hypertarget{tb__listener_8h_a60e447ffac92a59d8fcc6eb9e343db34}{\index{tb\-\_\-listener.\-h@{tb\-\_\-listener.\-h}!tb\-\_\-accept@{tb\-\_\-accept}}
\index{tb\-\_\-accept@{tb\-\_\-accept}!tb_listener.h@{tb\-\_\-listener.\-h}}
\subsubsection[{tb\-\_\-accept}]{\setlength{\rightskip}{0pt plus 5cm}{\bf tb\-\_\-session\-\_\-t}$\ast$ tb\-\_\-accept (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-listener\-\_\-t} $\ast$}]{listener}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}}\label{tb__listener_8h_a60e447ffac92a59d8fcc6eb9e343db34}


Accept an incoming connection. 

Accepts incoming connections. This operation blocks, as we are using blocking I/\-O currently.

\begin{DoxyRefDesc}{Deprecated}
\item[\hyperlink{deprecated__deprecated000001}{Deprecated}]\end{DoxyRefDesc}

\begin{DoxyParams}{Parameters}
{\em listener} & The listener to accept the connection on. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\hyperlink{structtb__session__t}{tb\-\_\-session\-\_\-t} A newly created session. 
\end{DoxyReturn}


Definition at line 467 of file tb\-\_\-listener.\-c.

\hypertarget{tb__listener_8h_ae35166dd784547cfb9d71a3b9af3dd2b}{\index{tb\-\_\-listener.\-h@{tb\-\_\-listener.\-h}!tb\-\_\-address@{tb\-\_\-address}}
\index{tb\-\_\-address@{tb\-\_\-address}!tb_listener.h@{tb\-\_\-listener.\-h}}
\subsubsection[{tb\-\_\-address}]{\setlength{\rightskip}{0pt plus 5cm}void tb\-\_\-address (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-listener\-\_\-t} $\ast$}]{listener, }
\item[{const char $\ast$}]{info, }
\item[{struct sockaddr\-\_\-storage $\ast$}]{store}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}}\label{tb__listener_8h_ae35166dd784547cfb9d71a3b9af3dd2b}


Definition at line 692 of file tb\-\_\-listener.\-c.

\hypertarget{tb__listener_8h_ae886708c5c2a62a435422948143d6e69}{\index{tb\-\_\-listener.\-h@{tb\-\_\-listener.\-h}!tb\-\_\-bind@{tb\-\_\-bind}}
\index{tb\-\_\-bind@{tb\-\_\-bind}!tb_listener.h@{tb\-\_\-listener.\-h}}
\subsubsection[{tb\-\_\-bind}]{\setlength{\rightskip}{0pt plus 5cm}int tb\-\_\-bind (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-listener\-\_\-t} $\ast$}]{listener}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}}\label{tb__listener_8h_ae886708c5c2a62a435422948143d6e69}


Bind the listener to its address. 

Binds the listener to the address specified by address.


\begin{DoxyParams}{Parameters}
{\em listener} & The listener to bind. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 on success, -\/1 on failure. 
\end{DoxyReturn}


Definition at line 564 of file tb\-\_\-listener.\-c.

\hypertarget{tb__listener_8h_ab13164809a5b7d6ce88a2e3156096f8c}{\index{tb\-\_\-listener.\-h@{tb\-\_\-listener.\-h}!tb\-\_\-connect@{tb\-\_\-connect}}
\index{tb\-\_\-connect@{tb\-\_\-connect}!tb_listener.h@{tb\-\_\-listener.\-h}}
\subsubsection[{tb\-\_\-connect}]{\setlength{\rightskip}{0pt plus 5cm}int tb\-\_\-connect (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-listener\-\_\-t} $\ast$}]{listener}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}}\label{tb__listener_8h_ab13164809a5b7d6ce88a2e3156096f8c}


Attempt to connect. 

Attempts to connect to the specified address and port. 

Definition at line 545 of file tb\-\_\-listener.\-c.

\hypertarget{tb__listener_8h_a042a2b565ccc70e1506562ad43c83bfb}{\index{tb\-\_\-listener.\-h@{tb\-\_\-listener.\-h}!tb\-\_\-create\-\_\-endpoint@{tb\-\_\-create\-\_\-endpoint}}
\index{tb\-\_\-create\-\_\-endpoint@{tb\-\_\-create\-\_\-endpoint}!tb_listener.h@{tb\-\_\-listener.\-h}}
\subsubsection[{tb\-\_\-create\-\_\-endpoint}]{\setlength{\rightskip}{0pt plus 5cm}{\bf tb\-\_\-listener\-\_\-t}$\ast$ tb\-\_\-create\-\_\-endpoint (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-test\-\_\-params\-\_\-t} $\ast$}]{params}
\end{DoxyParamCaption}
)}}\label{tb__listener_8h_a042a2b565ccc70e1506562ad43c83bfb}


Create a listener using a \hyperlink{structtb__test__params__t}{tb\-\_\-test\-\_\-params\-\_\-t} struct. 

The details in the struct are used to create an endpoint for use in testing.


\begin{DoxyParams}{Parameters}
{\em params} & A struct with all of the required details for a test. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the endpoint to test with. 
\end{DoxyReturn}


Definition at line 158 of file tb\-\_\-listener.\-c.

\hypertarget{tb__listener_8h_a5ec3b6c120621050965582e51e4d0d5a}{\index{tb\-\_\-listener.\-h@{tb\-\_\-listener.\-h}!tb\-\_\-create\-\_\-listener@{tb\-\_\-create\-\_\-listener}}
\index{tb\-\_\-create\-\_\-listener@{tb\-\_\-create\-\_\-listener}!tb_listener.h@{tb\-\_\-listener.\-h}}
\subsubsection[{tb\-\_\-create\-\_\-listener}]{\setlength{\rightskip}{0pt plus 5cm}{\bf tb\-\_\-listener\-\_\-t}$\ast$ tb\-\_\-create\-\_\-listener (
\begin{DoxyParamCaption}
\item[{{\bf E\-N\-D\-P\-O\-I\-N\-T\-\_\-\-T\-Y\-P\-E}}]{type, }
\item[{char $\ast$}]{addr, }
\item[{char $\ast$}]{port, }
\item[{{\bf P\-R\-O\-T\-O\-C\-O\-L}}]{protocol, }
\item[{int}]{bufsize}
\end{DoxyParamCaption}
)}}\label{tb__listener_8h_a5ec3b6c120621050965582e51e4d0d5a}


Create a listener with the supplied parameters. 

Creates a listener and the accociated data structures.


\begin{DoxyParams}{Parameters}
{\em type} & The type of endpoint to create. \\
\hline
{\em addr} & The address to bind to. \\
\hline
{\em port} & The port to bind to. \\
\hline
{\em num\-\_\-threads} & The number of worker threads to use.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The newly created listener. 
\end{DoxyReturn}


Definition at line 38 of file tb\-\_\-listener.\-c.

\hypertarget{tb__listener_8h_ac2e55c5098e2f7105812f5947860cf45}{\index{tb\-\_\-listener.\-h@{tb\-\_\-listener.\-h}!tb\-\_\-create\-\_\-socket@{tb\-\_\-create\-\_\-socket}}
\index{tb\-\_\-create\-\_\-socket@{tb\-\_\-create\-\_\-socket}!tb_listener.h@{tb\-\_\-listener.\-h}}
\subsubsection[{tb\-\_\-create\-\_\-socket}]{\setlength{\rightskip}{0pt plus 5cm}int tb\-\_\-create\-\_\-socket (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-listener\-\_\-t} $\ast$}]{listener}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}}\label{tb__listener_8h_ac2e55c5098e2f7105812f5947860cf45}


Create a socket. 

Creates a new socket for the specified listener.


\begin{DoxyParams}{Parameters}
{\em The} & listener to create the socket for. \\
\hline
\end{DoxyParams}


Definition at line 527 of file tb\-\_\-listener.\-c.

\hypertarget{tb__listener_8h_a370d0eb443de6db87ab002ea2e5cc468}{\index{tb\-\_\-listener.\-h@{tb\-\_\-listener.\-h}!tb\-\_\-destroy\-\_\-listener@{tb\-\_\-destroy\-\_\-listener}}
\index{tb\-\_\-destroy\-\_\-listener@{tb\-\_\-destroy\-\_\-listener}!tb_listener.h@{tb\-\_\-listener.\-h}}
\subsubsection[{tb\-\_\-destroy\-\_\-listener}]{\setlength{\rightskip}{0pt plus 5cm}void tb\-\_\-destroy\-\_\-listener (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-listener\-\_\-t} $\ast$}]{listener}
\end{DoxyParamCaption}
)}}\label{tb__listener_8h_a370d0eb443de6db87ab002ea2e5cc468}


Destroy a listener. 

Destroys the listener, and its associated data structures.


\begin{DoxyParams}{Parameters}
{\em listener} & The listener to destroy. \\
\hline
\end{DoxyParams}


Definition at line 282 of file tb\-\_\-listener.\-c.

\hypertarget{tb__listener_8h_a233900871cf97b4af517dcf4bbdd5d6b}{\index{tb\-\_\-listener.\-h@{tb\-\_\-listener.\-h}!tb\-\_\-error@{tb\-\_\-error}}
\index{tb\-\_\-error@{tb\-\_\-error}!tb_listener.h@{tb\-\_\-listener.\-h}}
\subsubsection[{tb\-\_\-error}]{\setlength{\rightskip}{0pt plus 5cm}void tb\-\_\-error (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-listener\-\_\-t} $\ast$}]{listener, }
\item[{const char $\ast$}]{info, }
\item[{int}]{errno}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}}\label{tb__listener_8h_a233900871cf97b4af517dcf4bbdd5d6b}


Format an error to the log file. 



Definition at line 676 of file tb\-\_\-listener.\-c.

\hypertarget{tb__listener_8h_a6e5c88a915882ea9d39fd41ee4742ffc}{\index{tb\-\_\-listener.\-h@{tb\-\_\-listener.\-h}!tb\-\_\-ex\-\_\-get\-\_\-stats@{tb\-\_\-ex\-\_\-get\-\_\-stats}}
\index{tb\-\_\-ex\-\_\-get\-\_\-stats@{tb\-\_\-ex\-\_\-get\-\_\-stats}!tb_listener.h@{tb\-\_\-listener.\-h}}
\subsubsection[{tb\-\_\-ex\-\_\-get\-\_\-stats}]{\setlength{\rightskip}{0pt plus 5cm}{\bf tb\-\_\-prot\-\_\-stats\-\_\-t}$\ast$ tb\-\_\-ex\-\_\-get\-\_\-stats (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-listener\-\_\-t} $\ast$}]{listener}
\end{DoxyParamCaption}
)}}\label{tb__listener_8h_a6e5c88a915882ea9d39fd41ee4742ffc}


A thread safe way to get access to stats. 

This method controls access to the stats generated by testbed. These stats are updated every second, and can be read once. If the data that can be obtained by this function has already been read, it blocks until new data has arrived.


\begin{DoxyParams}{Parameters}
{\em listener} & The listener for which to get the stats from. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\hyperlink{structtb__prot__stats__t}{tb\-\_\-prot\-\_\-stats\-\_\-t} with the stats inserted. 
\end{DoxyReturn}


Definition at line 362 of file tb\-\_\-listener.\-c.

\hypertarget{tb__listener_8h_aa1646d6df4318c903d2653a6032a0a40}{\index{tb\-\_\-listener.\-h@{tb\-\_\-listener.\-h}!tb\-\_\-get\-\_\-cpu\-\_\-info@{tb\-\_\-get\-\_\-cpu\-\_\-info}}
\index{tb\-\_\-get\-\_\-cpu\-\_\-info@{tb\-\_\-get\-\_\-cpu\-\_\-info}!tb_listener.h@{tb\-\_\-listener.\-h}}
\subsubsection[{tb\-\_\-get\-\_\-cpu\-\_\-info}]{\setlength{\rightskip}{0pt plus 5cm}void tb\-\_\-get\-\_\-cpu\-\_\-info (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-listener\-\_\-t} $\ast$}]{listener}
\end{DoxyParamCaption}
)}}\label{tb__listener_8h_aa1646d6df4318c903d2653a6032a0a40}
Gets the tid from syscall and pthread\-\_\-self, sets them in the listener. 

Definition at line 276 of file tb\-\_\-listener.\-c.

\hypertarget{tb__listener_8h_ac09710b23dca8fcf1c05f4bd4c707b7a}{\index{tb\-\_\-listener.\-h@{tb\-\_\-listener.\-h}!tb\-\_\-get\-\_\-prot\-\_\-stats@{tb\-\_\-get\-\_\-prot\-\_\-stats}}
\index{tb\-\_\-get\-\_\-prot\-\_\-stats@{tb\-\_\-get\-\_\-prot\-\_\-stats}!tb_listener.h@{tb\-\_\-listener.\-h}}
\subsubsection[{tb\-\_\-get\-\_\-prot\-\_\-stats}]{\setlength{\rightskip}{0pt plus 5cm}void tb\-\_\-get\-\_\-prot\-\_\-stats (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-listener\-\_\-t} $\ast$}]{listener}
\end{DoxyParamCaption}
)}}\label{tb__listener_8h_ac09710b23dca8fcf1c05f4bd4c707b7a}


collect stats for listener. 

\hypertarget{tb__listener_8h_aadc6c1af686cf9fc7bbd8874eca3be42}{\index{tb\-\_\-listener.\-h@{tb\-\_\-listener.\-h}!tb\-\_\-get\-\_\-worker@{tb\-\_\-get\-\_\-worker}}
\index{tb\-\_\-get\-\_\-worker@{tb\-\_\-get\-\_\-worker}!tb_listener.h@{tb\-\_\-listener.\-h}}
\subsubsection[{tb\-\_\-get\-\_\-worker}]{\setlength{\rightskip}{0pt plus 5cm}{\bf tb\-\_\-worker\-\_\-t}$\ast$ tb\-\_\-get\-\_\-worker (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-listener\-\_\-t} $\ast$}]{listener, }
\item[{{\bf tb\-\_\-session\-\_\-t} $\ast$}]{session}
\end{DoxyParamCaption}
)}}\label{tb__listener_8h_aadc6c1af686cf9fc7bbd8874eca3be42}


Get a worker for the supplied session. 

Fetches a worker to perform work based on the information contained in the \hyperlink{structtb__session__t}{tb\-\_\-session\-\_\-t} struct. If no such session exists (when a new connection is created) then this session will be added to the hashtable, and assigned a worker. 

Definition at line 244 of file tb\-\_\-listener.\-c.

\hypertarget{tb__listener_8h_a818e46957ec1b6d9498b03c42d3e962a}{\index{tb\-\_\-listener.\-h@{tb\-\_\-listener.\-h}!tb\-\_\-listen@{tb\-\_\-listen}}
\index{tb\-\_\-listen@{tb\-\_\-listen}!tb_listener.h@{tb\-\_\-listener.\-h}}
\subsubsection[{tb\-\_\-listen}]{\setlength{\rightskip}{0pt plus 5cm}int tb\-\_\-listen (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-listener\-\_\-t} $\ast$}]{listener}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}}\label{tb__listener_8h_a818e46957ec1b6d9498b03c42d3e962a}


Bind and listen. 

Binds the listener to the specified port and ip address, and then begins listening.


\begin{DoxyParams}{Parameters}
{\em listener} & The listener to listen. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 
\end{DoxyReturn}


Definition at line 449 of file tb\-\_\-listener.\-c.

\hypertarget{tb__listener_8h_af552255cac39c1b712a1c213070c04e0}{\index{tb\-\_\-listener.\-h@{tb\-\_\-listener.\-h}!tb\-\_\-print\-\_\-listener@{tb\-\_\-print\-\_\-listener}}
\index{tb\-\_\-print\-\_\-listener@{tb\-\_\-print\-\_\-listener}!tb_listener.h@{tb\-\_\-listener.\-h}}
\subsubsection[{tb\-\_\-print\-\_\-listener}]{\setlength{\rightskip}{0pt plus 5cm}void tb\-\_\-print\-\_\-listener (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-listener\-\_\-t} $\ast$}]{listener}
\end{DoxyParamCaption}
)}}\label{tb__listener_8h_af552255cac39c1b712a1c213070c04e0}


Print a listener. 

Prints the given listener to stdout.


\begin{DoxyParams}{Parameters}
{\em listener} & The listener to print the values for. \\
\hline
\end{DoxyParams}


Definition at line 338 of file tb\-\_\-listener.\-c.

\hypertarget{tb__listener_8h_ae2ea1c34daca7877a7acae3afa17427f}{\index{tb\-\_\-listener.\-h@{tb\-\_\-listener.\-h}!tb\-\_\-recv\-\_\-data@{tb\-\_\-recv\-\_\-data}}
\index{tb\-\_\-recv\-\_\-data@{tb\-\_\-recv\-\_\-data}!tb_listener.h@{tb\-\_\-listener.\-h}}
\subsubsection[{tb\-\_\-recv\-\_\-data}]{\setlength{\rightskip}{0pt plus 5cm}int tb\-\_\-recv\-\_\-data (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-listener\-\_\-t} $\ast$}]{listener, }
\item[{{\bf tb\-\_\-session\-\_\-t} $\ast$}]{session}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}}\label{tb__listener_8h_ae2ea1c34daca7877a7acae3afa17427f}


Receive data. 



Definition at line 606 of file tb\-\_\-listener.\-c.

\hypertarget{tb__listener_8h_afec61a9f694c57aec84cc5a2d520b001}{\index{tb\-\_\-listener.\-h@{tb\-\_\-listener.\-h}!tb\-\_\-recv\-\_\-from@{tb\-\_\-recv\-\_\-from}}
\index{tb\-\_\-recv\-\_\-from@{tb\-\_\-recv\-\_\-from}!tb_listener.h@{tb\-\_\-listener.\-h}}
\subsubsection[{tb\-\_\-recv\-\_\-from}]{\setlength{\rightskip}{0pt plus 5cm}int tb\-\_\-recv\-\_\-from (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-listener\-\_\-t} $\ast$}]{listener, }
\item[{{\bf tb\-\_\-session\-\_\-t} $\ast$}]{session}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}}\label{tb__listener_8h_afec61a9f694c57aec84cc5a2d520b001}


recv from -\/ used by U\-D\-P. 



Definition at line 643 of file tb\-\_\-listener.\-c.

\hypertarget{tb__listener_8h_aedd19f27c5b2e1d8717024afed30ec51}{\index{tb\-\_\-listener.\-h@{tb\-\_\-listener.\-h}!tb\-\_\-resolve\-\_\-address@{tb\-\_\-resolve\-\_\-address}}
\index{tb\-\_\-resolve\-\_\-address@{tb\-\_\-resolve\-\_\-address}!tb_listener.h@{tb\-\_\-listener.\-h}}
\subsubsection[{tb\-\_\-resolve\-\_\-address}]{\setlength{\rightskip}{0pt plus 5cm}int tb\-\_\-resolve\-\_\-address (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-listener\-\_\-t} $\ast$}]{listener}
\end{DoxyParamCaption}
)}}\label{tb__listener_8h_aedd19f27c5b2e1d8717024afed30ec51}


Resolve the address for the given listener. 


\begin{DoxyParams}{Parameters}
{\em listener} & The listener to resolve the address for. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
0 if there was no error, -\/1 otherwise. 
\end{DoxyReturn}


Definition at line 497 of file tb\-\_\-listener.\-c.

\hypertarget{tb__listener_8h_a9801fb8797f4a9bab6e99be129ff3304}{\index{tb\-\_\-listener.\-h@{tb\-\_\-listener.\-h}!tb\-\_\-send\-\_\-data@{tb\-\_\-send\-\_\-data}}
\index{tb\-\_\-send\-\_\-data@{tb\-\_\-send\-\_\-data}!tb_listener.h@{tb\-\_\-listener.\-h}}
\subsubsection[{tb\-\_\-send\-\_\-data}]{\setlength{\rightskip}{0pt plus 5cm}int tb\-\_\-send\-\_\-data (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-listener\-\_\-t} $\ast$}]{listener, }
\item[{char $\ast$}]{buff, }
\item[{int}]{size}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}}\label{tb__listener_8h_a9801fb8797f4a9bab6e99be129ff3304}


Send data. 



Definition at line 582 of file tb\-\_\-listener.\-c.

\hypertarget{tb__listener_8h_ae70c851b28d81589f2648ce018e727bd}{\index{tb\-\_\-listener.\-h@{tb\-\_\-listener.\-h}!tb\-\_\-send\-\_\-to@{tb\-\_\-send\-\_\-to}}
\index{tb\-\_\-send\-\_\-to@{tb\-\_\-send\-\_\-to}!tb_listener.h@{tb\-\_\-listener.\-h}}
\subsubsection[{tb\-\_\-send\-\_\-to}]{\setlength{\rightskip}{0pt plus 5cm}int tb\-\_\-send\-\_\-to (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-listener\-\_\-t} $\ast$}]{listener, }
\item[{{\bf tb\-\_\-session\-\_\-t} $\ast$}]{session}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}}\label{tb__listener_8h_ae70c851b28d81589f2648ce018e727bd}


Definition at line 626 of file tb\-\_\-listener.\-c.

\hypertarget{tb__listener_8h_a633cfdcf57f29c6e1ae09044ed483794}{\index{tb\-\_\-listener.\-h@{tb\-\_\-listener.\-h}!tb\-\_\-set\-\_\-epoll@{tb\-\_\-set\-\_\-epoll}}
\index{tb\-\_\-set\-\_\-epoll@{tb\-\_\-set\-\_\-epoll}!tb_listener.h@{tb\-\_\-listener.\-h}}
\subsubsection[{tb\-\_\-set\-\_\-epoll}]{\setlength{\rightskip}{0pt plus 5cm}int tb\-\_\-set\-\_\-epoll (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-listener\-\_\-t} $\ast$}]{listener}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}}\label{tb__listener_8h_a633cfdcf57f29c6e1ae09044ed483794}


Set epoll for this listener. 



Definition at line 659 of file tb\-\_\-listener.\-c.

\hypertarget{tb__listener_8h_ae063a1fdce497a4e08aea504a6ab927b}{\index{tb\-\_\-listener.\-h@{tb\-\_\-listener.\-h}!tb\-\_\-set\-\_\-l\-\_\-stats@{tb\-\_\-set\-\_\-l\-\_\-stats}}
\index{tb\-\_\-set\-\_\-l\-\_\-stats@{tb\-\_\-set\-\_\-l\-\_\-stats}!tb_listener.h@{tb\-\_\-listener.\-h}}
\subsubsection[{tb\-\_\-set\-\_\-l\-\_\-stats}]{\setlength{\rightskip}{0pt plus 5cm}void tb\-\_\-set\-\_\-l\-\_\-stats (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-listener\-\_\-t} $\ast$}]{listener}
\end{DoxyParamCaption}
)}}\label{tb__listener_8h_ae063a1fdce497a4e08aea504a6ab927b}


Gets the stats for the listener. 

This method collects the stats for single connection servers. The stats are saved in the listener-\/$>$stats field.

\begin{DoxyPrecond}{Precondition}
The listener must be of a single connection type. 
\end{DoxyPrecond}

\begin{DoxyParams}{Parameters}
{\em listener} & The listener to collect stats for. \\
\hline
\end{DoxyParams}


Definition at line 383 of file tb\-\_\-listener.\-c.

\hypertarget{tb__listener_8h_a144e59e2470a90fc2b6e1f840da77ae8}{\index{tb\-\_\-listener.\-h@{tb\-\_\-listener.\-h}!tb\-\_\-set\-\_\-m\-\_\-stats@{tb\-\_\-set\-\_\-m\-\_\-stats}}
\index{tb\-\_\-set\-\_\-m\-\_\-stats@{tb\-\_\-set\-\_\-m\-\_\-stats}!tb_listener.h@{tb\-\_\-listener.\-h}}
\subsubsection[{tb\-\_\-set\-\_\-m\-\_\-stats}]{\setlength{\rightskip}{0pt plus 5cm}void tb\-\_\-set\-\_\-m\-\_\-stats (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-listener\-\_\-t} $\ast$}]{listener}
\end{DoxyParamCaption}
)}}\label{tb__listener_8h_a144e59e2470a90fc2b6e1f840da77ae8}


Gets the stats for the listener. 

This method collects the stats for multiple connection servers. The stats are saved in each of the sessions stats structs, and the total number of bytes sent are saved in the listener-\/$>$stats struct.

\begin{DoxyPrecond}{Precondition}
The listener must be of the multiple connection type. 
\end{DoxyPrecond}

\begin{DoxyParams}{Parameters}
{\em listener} & The listener to collect stats for. \\
\hline
\end{DoxyParams}


Definition at line 417 of file tb\-\_\-listener.\-c.

\hypertarget{tb__listener_8h_a15dfa6415134b86b0a24bb01eece50ee}{\index{tb\-\_\-listener.\-h@{tb\-\_\-listener.\-h}!tb\-\_\-set\-\_\-sockopt@{tb\-\_\-set\-\_\-sockopt}}
\index{tb\-\_\-set\-\_\-sockopt@{tb\-\_\-set\-\_\-sockopt}!tb_listener.h@{tb\-\_\-listener.\-h}}
\subsubsection[{tb\-\_\-set\-\_\-sockopt}]{\setlength{\rightskip}{0pt plus 5cm}int tb\-\_\-set\-\_\-sockopt (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-listener\-\_\-t} $\ast$}]{listener}
\end{DoxyParamCaption}
)}}\label{tb__listener_8h_a15dfa6415134b86b0a24bb01eece50ee}


Set sockopt. 

Set the sockoptions for the given listener.


\begin{DoxyParams}{Parameters}
{\em listener} & The listener to set the sockopts for \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
-\/1 on error, 0 otherwise. 
\end{DoxyReturn}
\hypertarget{tb__listener_8h_a3ef8c04e8f0f2aed65b59821d3a1b01d}{\index{tb\-\_\-listener.\-h@{tb\-\_\-listener.\-h}!tb\-\_\-set\-\_\-therad\-\_\-param@{tb\-\_\-set\-\_\-therad\-\_\-param}}
\index{tb\-\_\-set\-\_\-therad\-\_\-param@{tb\-\_\-set\-\_\-therad\-\_\-param}!tb_listener.h@{tb\-\_\-listener.\-h}}
\subsubsection[{tb\-\_\-set\-\_\-therad\-\_\-param}]{\setlength{\rightskip}{0pt plus 5cm}int tb\-\_\-set\-\_\-therad\-\_\-param (
\begin{DoxyParamCaption}
\item[{{\bf tb\-\_\-listener\-\_\-t} $\ast$}]{listener}
\end{DoxyParamCaption}
)}}\label{tb__listener_8h_a3ef8c04e8f0f2aed65b59821d3a1b01d}


Set the affinity and scheduling priority for a given thread. 

This sets the affinity for a thread 